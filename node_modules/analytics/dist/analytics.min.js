var _analytics=function(t){"use strict";function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function n(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n;e=r,t=o[n=t],n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function C(t,e,n,r,o){for(e=e.split?e.split("."):e,r=0;r<e.length;r++)t=t?t[e[r]]:o;return t===o?n:t}var r="undefined",o="object",i="any",a="*",u="__",c="undefined"!=typeof process?process:{};null!=(N=c.env)&&N.NODE_ENV;var U="undefined"!=typeof window;function s(t,e){return typeof e===t}null!=c.versions&&c.versions.node,U&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));var R=s.bind(null,"function"),q=s.bind(null,"string"),l=s.bind(null,"undefined"),g=s.bind(null,"boolean");function V(t){if((e=t)&&("object"==typeof e||null!==e)){for(var e,n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n}}function f(t,e){var n=t instanceof Element||t instanceof HTMLDocument;return n&&e?(void 0===(e=e)&&(e=""),(t=t)&&t.nodeName===e.toUpperCase()):n}function p(){[].slice.call(arguments,1);return 1}function d(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function $(e){return function(t){for(var e,n=Object.create(null),r=/([^&=]+)=?([^&]*)/g;i=r.exec(t);){var o=d(i[1]),i=d(i[2]);"[]"===o.substring(o.length-2)?(n[o=o.substring(0,o.length-2)]||(n[o]=[])).push(i):n[o]=""===i||i}for(e in n){var a=e.split("[");1<a.length&&(function(t,e,n){for(var r=e.length-1,o=0;o<r;++o){var i=e[o];if("__proto__"===i||"constructor"===i)break;i in t||(t[i]={}),t=t[i]}t[e[r]]=n}(n,a.map(function(t){return t.replace(/[?[\]\\ ]/g,"")}),n[e]),delete n[e])}return n}(function(){if(e){var t=e.match(/\?(.*)/);return t&&t[1]?t[1].split("#")[0]:""}return U&&window.location.search.substring(1)}())}function F(){for(var t="",e=0,n=4294967295*Math.random()|0;e++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[e-1],o=15&n;t+="-"==r||"4"==r?r:("x"==r?o:3&o|8).toString(16),n=e%8==0?4294967295*Math.random()|0:n>>4}return t}p(f,"form"),p(f,"button"),p(f,"input"),p(f,"select");var h="global",m=u+"global"+u,y=typeof self==o&&self.self===self&&self||typeof global==o&&global.global===global&&global||void 0;function G(t){return y[m][t]}function B(t,e){return y[m][t]=e}function J(t){delete y[m][t]}function v(t,e,n){var r,o;try{w(t)&&(o=(r=window[t])[e].bind(r))}catch(t){}return o||n}y[m]||(y[m]={});var b={};function w(t){if(typeof b[t]!=r)return b[t];try{var e=window[t];e.setItem(r,r),e.removeItem(r)}catch(e){return b[t]=!1}return b[t]=!0}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function H(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function Y(u){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=u.apply(t,a);function o(t){I(r,e,n,o,i,"next",t)}function i(t){I(r,e,n,o,i,"throw",t)}o(void 0)})}}function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k={exports:{}};!function(){var e=function(a){var c,t=Object.prototype,s=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o,i,a,u,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype),r=new O(r||[]);return e._invoke=(o=t,i=n,a=r,u=f,function(t,e){if(u===d)throw new Error("Generator is already running");if(u===h){if("throw"===t)throw e;return j()}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===c){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=c,t(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=l(r,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;r=r.arg;if(!r)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g;{if(!r.done)return r;n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c)}n.delegate=null;return g}(n,a);if(r){if(r===g)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(u===f)throw u=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);u=d;r=l(o,i,a);if("normal"===r.type){if(u=a.done?h:p,r.arg!==g)return{value:r.arg,done:a.done}}else"throw"===r.type&&(u=h,a.method="throw",a.arg=r.arg)}}),e}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=u;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",g={};function m(){}function y(){}function v(){}var b={};i(b,r,function(){return this});e=Object.getPrototypeOf,e=e&&e(e(k([])));e&&e!==t&&s.call(e,r)&&(b=e);var w=v.prototype=m.prototype=Object.create(b);function x(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function S(a,u){var e;this._invoke=function(n,r){function t(){return new u(function(t,e){!function e(t,n,r,o){t=l(a[t],a,n);if("throw"!==t.type){var i=t.arg;return(n=i.value)&&"object"==typeof n&&s.call(n,"__await")?u.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)})}o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function k(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,t=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t};return t.next=t}}return{next:j}}function j(){return{value:c,done:!0}}return i(w,"constructor",y.prototype=v),i(v,"constructor",y),y.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(w),t},a.awrap=function(t){return{__await:t}},x(S.prototype),i(S.prototype,n,function(){return this}),a.AsyncIterator=S,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new S(u(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},x(w),i(w,o,"Generator"),i(w,r,function(){return this}),i(w,"toString",function(){return"[object Generator]"}),a.keys=function(n){var t,r=[];for(t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,o=n.completion;return"throw"===o.type&&(r=o.arg,E(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),g}},a}(k.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}();var K=k.exports,j="function",P="undefined",_="reducer",N="@@redux/",A=N+"INIT",T=N+Math.random().toString(36),L=function(){return("undefined"==typeof Symbol?"undefined":X(Symbol))===j&&Symbol.observable||"@@observable"}(),M=" != "+j;function Q(t,e,n){if(X(e)===j&&X(n)===P&&(n=e,e=void 0),X(n)!==P){if(X(n)!==j)throw new Error("enhancer"+M);return n(Q)(t,e)}if(X(t)!==j)throw new Error(_+M);var r=t,o=e,i=[],a=i,u=!1;function c(){a===i&&(a=i.slice())}function s(){return o}function l(e){if(X(e)!==j)throw new Error("Listener"+M);var n=!0;return c(),a.push(e),function(){var t;n&&(n=!1,c(),t=a.indexOf(e),a.splice(t,1))}}function f(t){if(!V(t))throw new Error("Act != obj");if(X(t.type)===P)throw new Error("ActType "+P);if(u)throw new Error("Dispatch in "+_);try{u=!0,o=r(o,t)}finally{u=!1}for(var e=i=a,n=0;n<e.length;n++)(0,e[n])();return t}return f({type:A}),E({dispatch:f,subscribe:l,getState:s,replaceReducer:function(t){if(X(t)!==j)throw new Error("next "+_+M);r=t,f({type:A})}},L,function(){var n=l;return E({subscribe:function(t){if("object"!==X(t))throw new TypeError("Observer != obj");function e(){t.next&&t.next(o)}return e(),{unsubscribe:n(e)}}},L,function(){return this})})}function Z(t){for(var e=Object.keys(t),l={},n=0;n<e.length;n++){var r=e[n];X(t[r])===j&&(l[r]=t[r])}var f,o,p=Object.keys(l);try{o=l,Object.keys(o).forEach(function(t){var e=o[t];if(X(e(void 0,{type:A}))===P||X(e(void 0,{type:T}))===P)throw new Error(_+" "+t+" "+P)})}catch(t){f=t}return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;if(f)throw f;for(var n=!1,r={},o=0;o<p.length;o++){var i=p[o],a=l[i],u=t[i],c=a(u,e);if(X(c)===P){var s=(s=i,"action "+((a=(a=e)&&a.type)&&a.toString()||"?")+_+" "+s+" returns "+P);throw new Error(s)}r[i]=c,n=n||c!==u}return n?r:t}}function tt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}var et=u+"anon_id",nt=u+"user_id",rt=u+"user_traits",c=Object.freeze({__proto__:null,ANON_ID:et,USER_ID:nt,USER_TRAITS:rt}),z="analytics",ot="userId",it="anonymousId",at="https://lytics.dev/errors/",ut=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],ct=["name","EVENTS","config","loaded"],st=ut.reduce(function(t,e){return t[e]=e,t},{registerPluginType:function(t){return"registerPlugin:".concat(t)},pluginReadyType:function(t){return"ready:".concat(t)}});var lt=/^utm_/,ft=/^an_prop_/,pt=/^an_trait_/;function dt(t){return{userId:t.getItem(nt),anonymousId:t.getItem(et),traits:t.getItem(rt)}}var ht=function(t){return u+"TEMP"+u+t};var D={};function gt(t,e){D[t]&&R(D[t])&&(D[t](e),delete D[t])}function mt(o,i,a){return new Promise(function(e,n){return i()?e(o):a<1?n(W(W({},o),{},{queue:!0})):(r=10,new Promise(function(t){return setTimeout(t,r)}).then(function(t){return mt(o,i,a-10).then(e,n)}));var r})}function yt(o,t,i){var n,a=t(),e=o.getState(),u=e.plugins,t=e.context,c=e.queue,s=e.user;!t.offline&&c&&c.actions&&c.actions.length&&((n=c.actions.reduce(function(t,e,n){return u[e.plugin].loaded?(t.process.push(e),t.processIndex.push(n)):(t.requeue.push(e),t.requeueIndex.push(n)),t},{processIndex:[],process:[],requeue:[],requeueIndex:[]})).processIndex&&n.processIndex.length&&(n.processIndex.forEach(function(t){var e=c.actions[t],n=e.plugin,r=e.payload.type,t=a[n][r];t&&R(t)&&(t({payload:e=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return[ot,it].reduce(function(t,e){return n.hasOwnProperty(e)&&r[e]&&r[e]!==n[e]&&(t[e]=r[e]),t},n)}(e.payload,s),config:u[n].config,instance:i}),n="".concat(r,":").concat(n),o.dispatch(W(W({},e),{},{type:n,_:{called:n,from:"queueDrain"}})))}),t=c.actions.filter(function(t,e){return!~n.processIndex.indexOf(e)}),c.actions=t))}function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,e)||S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var bt=/Start$/,wt=/^bootstrap/,xt=/^ready/;function St(){return(St=Y(K.mark(function t(n,e,r,o,i){var a,u,c,s,l,f,p,d,h;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=R(e)?e():e,u=n.type,c=u.replace(bt,""),n._&&n._.called)return t.abrupt("return",n);t.next=5;break;case 5:return s=r.getState(),f=function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},o=2<arguments.length&&void 0!==n?n:{};return Object.keys(e).filter(function(t){var e=o.plugins||{};return g(e[t])?e[t]:!1!==e.all&&(!r[t]||!1!==r[t].enabled)}).map(function(t){return e[t]})}(a,s.plugins,n.options),u===st.initializeStart&&n.fromEnable&&(f=Object.keys(s.plugins).filter(function(t){var e=s.plugins[t];return n.plugins.includes(t)&&!e.initialized}).map(function(t){return a[t]})),l=f.map(function(t){return t.name}),f=function(i,a){var t=Pt(i).map(function(t){return jt(t,a)});return a.reduce(function(t,e){var n=e.name,r=vt(Pt(i,n).map(function(t){return jt(t,a)}),3),o=r[0],e=r[1],r=r[2];return o.length&&(t.beforeNS[n]=o),e.length&&(t.duringNS[n]=e),r.length&&(t.afterNS[n]=r),t},{before:t[0],beforeNS:{},during:t[1],duringNS:{},after:t[2],afterNS:{}})}(u,f),t.next=12,It({action:n,data:{exact:f.before,namespaced:f.beforeNS},state:s,allPlugins:a,allMatches:f,instance:r,store:o,EVENTS:i});case 12:if(Nt(p=t.sent,l.length))return t.abrupt("return",p);t.next=15;break;case 15:if(u!==c){t.next=19;break}d=p,t.next=22;break;case 19:return t.next=21,It({action:W(W({},p),{},{type:c}),data:{exact:f.during,namespaced:f.duringNS},state:s,allPlugins:a,allMatches:f,instance:r,store:o,EVENTS:i});case 21:d=t.sent;case 22:if(u.match(bt))return h="".concat(c,"End"),t.next=26,It({action:W(W({},d),{},{type:h}),data:{exact:f.after,namespaced:f.afterNS},state:s,allPlugins:a,allMatches:f,instance:r,store:o,EVENTS:i});t.next=28;break;case 26:(h=t.sent).meta&&h.meta.hasCallback&&gt(h.meta.rid,{payload:h});case 28:return t.abrupt("return",p);case 29:case"end":return t.stop()}},t)}))).apply(this,arguments)}function It(){return Et.apply(this,arguments)}function Et(){return(Et=Y(K.mark(function t(e){var p,a,d,h,n,g,r,m,o,y,v,b,w,x,i,u;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p=e.data,a=e.action,d=e.instance,u=e.state,h=e.allPlugins,n=e.allMatches,g=e.store,r=e.EVENTS,m=u.plugins,o=u.context,y=a.type,v=y.match(bt),u=p.exact.map(function(t){return t.pluginName}),v&&(u=n.during.map(function(t){return t.pluginName})),b=function(d,h){return function(t,e,n){var r=e.config,o=e.name,e="".concat(o,".").concat(t.type);n&&(e=n.event);var i,a,u,c,s,l,f,p,e=t.type.match(bt)?(u=o,c=e,s=h,l=n,f=t,function(t,e){var n=l?l.name:u,r=e&&At(e)?e:s;if(l&&(!(r=e&&At(e)?e:[u]).includes(u)||1!==r.length))throw new Error("Method ".concat(c," can only abort ").concat(u," plugin. ").concat(JSON.stringify(r)," input valid"));return W(W({},f),{},{abort:{reason:t,plugins:r,caller:c,_:n}})}):(i=t,a=e,function(){throw new Error(i.type+" action not cancellable. Remove abort in "+a)});return{payload:(p=t,Object.keys(p).reduce(function(t,e){return"type"===e||(V(p[e])?t[e]=Object.assign({},p[e]):t[e]=p[e]),t},{})),instance:d,config:r||{},abort:e}}}(d,u),w=p.exact.reduce(function(t,e){var n=e.pluginName,r=e.methodName,e=!1;return r.match(/^initialize/)||r.match(/^reset/)||(e=!m[n].loaded),o.offline&&r.match(/^(page|track|identify)/)&&(e=!0),t["".concat(n)]=e,t},{}),t.next=10,p.exact.reduce(function(){var r=Y(K.mark(function t(e,n,r){var u,o,i;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=n.pluginName,t.next=3,e;case 3:if(o=t.sent,p.namespaced&&p.namespaced[u])return t.next=7,p.namespaced[u].reduce(function(){var r=Y(K.mark(function t(e,n,r){var o,i,a;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(r,o,i){return function(t,e){var n=i||o;return W(W({},r),{},{abort:{reason:t,plugins:e||[o],caller:y,from:n}})}},t.next=3,e;case 3:if(o=t.sent,n.method&&R(n.method)){t.next=6;break}return t.abrupt("return",o);case 6:return function(t,e){var n=Lt(t);if(n&&n.name===e){var r=Lt(n.method),r=r?"or "+r.method:"";throw new Error([e+" plugin is calling method "+t,"Plugins cant call self","Use ".concat(n.method," ").concat(r," in ").concat(e," plugin insteadof ").concat(t)].join("\n"))}}(n.methodName,n.pluginName),t.next=9,n.method({payload:o,instance:d,abort:i(o,u,n.pluginName),config:kt(n.pluginName,m,h),plugins:m});case 9:return a=t.sent,a=V(a)?a:{},t.abrupt("return",Promise.resolve(W(W({},o),a)));case 12:case"end":return t.stop()}},t)}));return function(t,e,n){return r.apply(this,arguments)}}(),Promise.resolve(a));t.next=11;break;case 7:i=t.sent,o[u]=i,t.next=12;break;case 11:o[u]=a;case 12:return t.abrupt("return",Promise.resolve(o));case 13:case"end":return t.stop()}},t)}));return function(t,e,n){return r.apply(this,arguments)}}(),Promise.resolve({}));case 10:return x=t.sent,t.next=13,p.exact.reduce(function(){var r=Y(K.mark(function t(e,n,r){var o,i,a,u,c,s,l,f;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=p.exact.length===r+1,i=n.pluginName,a=h[i],t.next=5,e;case 5:if(u=t.sent,c=x[i]||{},_t(c=v?u:c,i))return Ot({data:c,method:y,instance:d,pluginName:i,store:g}),t.abrupt("return",Promise.resolve(u));t.next=11;break;case 11:if(_t(u,i))return o&&Ot({data:u,method:y,instance:d,store:g}),t.abrupt("return",Promise.resolve(u));t.next=14;break;case 14:if(w.hasOwnProperty(i)&&!0===w[i])return g.dispatch({type:"queue",plugin:i,payload:c,_:{called:"queue",from:"queueMechanism"}}),t.abrupt("return",Promise.resolve(u));t.next=17;break;case 17:return s=b(x[i],h[i]),t.next=20,a[y]({abort:s.abort,payload:c,instance:d,config:kt(i,m,h),plugins:m});case 20:return f=t.sent,l=V(f)?f:{},s=W(W({},u),l),_t(f=x[i],i)?Ot({data:f,method:y,instance:d,pluginName:i,store:g}):(l="".concat(y,":").concat(i),(l.match(/:/g)||[]).length<2&&!y.match(wt)&&!y.match(xt)&&(f=v?s:c,d.dispatch(W(W({},f),{},{type:l,_:{called:l,from:"submethod"}})))),t.abrupt("return",Promise.resolve(s));case 26:case"end":return t.stop()}},t)}));return function(t,e,n){return r.apply(this,arguments)}}(),Promise.resolve(a));case 13:if(i=t.sent,y.match(bt)||y.match(/^registerPlugin/)||y.match(xt)||y.match(wt)||y.match(/^params/)||y.match(/^userIdChanged/)){t.next=21;break}if(r.plugins.includes(y),i._&&i._.originalAction===y)return t.abrupt("return",i);t.next=18;break;case 18:u=W(W({},i),{_:{originalAction:i.type,called:i.type,from:"engineEnd"}}),Nt(i,p.exact.length)&&!y.match(/End$/)&&(u=W(W({},u),{type:i.type+"Aborted"})),g.dispatch(u);case 21:return t.abrupt("return",i);case 22:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Ot(t){var e=t.data,n=t.method;t.instance;var r=t.pluginName,r=n+"Aborted"+(r?":"+r:"");t.store.dispatch(W(W({},e),{},{type:r,_:{called:r,from:"abort"}}))}function kt(t,e,n){t=e[t]||n[t];return t&&t.config?t.config:{}}function jt(n,t){return t.reduce(function(t,e){return e[n]?t.concat({methodName:n,pluginName:e.name,method:e[n]}):t},[])}function Pt(t,e){var n=t.replace(bt,""),e=e?":".concat(e):"";return["".concat(t).concat(e),"".concat(n).concat(e),"".concat(n,"End").concat(e)]}function _t(t,e){t=t.abort;return t&&(!0===t||(Tt(t,e)||t&&Tt(t.plugins,e)))}function Nt(t,e){var n=t.abort;if(n){if(!0===n||q(n))return 1;t=n.plugins;return At(n)&&n.length===e||At(t)&&t.length===e}}function At(t){return Array.isArray(t)}function Tt(t,e){return!(!t||!At(t))&&t.includes(e)}function Lt(t){t=t.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function Mt(g,m,y){var v={};return function(h){return function(d){return function(){var e=Y(K.mark(function t(e){var n,r,o,i,a,u,c,s,l,f,p;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.type,r=e.abort,o=e.plugins,i=e,r)return t.abrupt("return",d(e));t.next=4;break;case 4:if(n===st.enablePlugin&&h.dispatch({type:st.initializeStart,plugins:o,disabled:[],fromEnable:!0,meta:e.meta}),n===st.disablePlugin&&setTimeout(function(){return gt(e.meta.rid,{payload:e})},0),n===st.initializeEnd&&(a=m(),u=Object.keys(a),p=u.filter(function(t){return o.includes(t)}).map(function(t){return a[t]}),c=[],s=[],l=e.disabled,f=p.map(function(e){var t=e.loaded,n=e.name;return mt(e,t,1e4).then(function(t){return v[n]||(h.dispatch({type:st.pluginReadyType(n),name:n,events:Object.keys(e).filter(function(t){return!ct.includes(t)})}),v[n]=!0),c=c.concat(n),e}).catch(function(t){if(t instanceof Error)throw new Error(t);return s=s.concat(t.name),t})}),Promise.all(f).then(function(t){var e={plugins:c,failed:s,disabled:l};setTimeout(function(){u.length===f.length+l.length&&h.dispatch(W(W({},{type:st.ready}),e))},0)})),n!==st.bootstrap)return/^ready:([^:]*)$/.test(n)&&setTimeout(function(){return yt(h,m,g)},0),t.next=11,function(){return St.apply(this,arguments)}(e,m,g,h,y);t.next=13;break;case 11:return p=t.sent,t.abrupt("return",d(p));case 13:return t.abrupt("return",d(i));case 14:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()}}}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t,e,n){return e&&zt(t.prototype,e),n&&zt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ct=Dt(function t(){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,"before",[]),E(this,"after",[]),E(this,"addMiddleware",function(t,e){a[e]=a[e].concat(t)}),E(this,"removeMiddleware",function(e,t){var n=a[t].findIndex(function(t){return t===e});-1!==n&&(a[t]=[].concat(H(a[t].slice(0,n)),H(a[t].slice(n+1))))}),E(this,"dynamicMiddlewares",function(i){return function(o){return function(r){return function(t){var e={getState:o.getState,dispatch:function(t){return o.dispatch(t)}},n=a[i].map(function(t){return t(e)});return tt.apply(void 0,H(n))(r)(t)}}}})});function Ut(t,e){return t.substring(e.length+1,t.length)}function Rt(t,n,r){return t.reduce(function(t,e){return t[e]=W(W({},r[e]),{enabled:n}),t},r)}function qt(t){try{return JSON.parse(JSON.stringify(t))}catch(t){}return t}var Vt={last:{},history:[]};function $t(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Vt,e=1<arguments.length?arguments[1]:void 0,n=e.type,r=e.event,o=e.properties,i=e.options,e=e.meta;if(n!==st.track)return t;e=qt(W(W({event:r,properties:o},Object.keys(i).length&&{options:i}),{},{meta:e}));return W(W({},t),{last:e,history:t.history.concat(e)})}var Ft={actions:[]};function Gt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ft,e=1<arguments.length?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case"queue":var o=r&&r.type&&r.type===st.identify?[e].concat(t.actions):t.actions.concat(e);return W(W({},t),{},{actions:o});case"dequeue":return[];default:return t}}var Bt=/#.*$/;function Jt(t){var e=function(){if(U)for(var t,e=document.getElementsByTagName("link"),n=0;t=e[n];n++)if("canonical"===t.getAttribute("rel"))return t.getAttribute("href")}();return e?e.match(/\?/)?e:e+t:window.location.href.replace(Bt,"")}var Ht=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!U)return t;var e=document,n=e.title,r=e.referrer,o=window,i=o.location,a=o.innerWidth,u=o.innerHeight,e=i.hash,o=i.search,i=Jt(o),u={title:n,url:i,path:"/"+((i=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(i=i))&&i[3]?i[3].split("?")[0].replace(Bt,""):""),hash:e,search:o,width:a,height:u};return r&&""!==r&&(u.referrer=r),W(W({},u),t)},Xt={last:{},history:[]};function Yt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Xt,e=1<arguments.length?arguments[1]:void 0,n=e.properties,r=e.options,o=e.meta;if(e.type!==st.page)return t;r=qt(W({properties:n,meta:o},Object.keys(r).length&&{options:r}));return W(W({},t),{last:r,history:t.history.concat(r)})}var o={},Wt={initialized:!1,sessionId:F(),app:null,version:null,debug:!1,offline:!!U&&!navigator.onLine,os:{name:"na"},userAgent:U?navigator.userAgent:"node",library:{name:z,version:"0.10.22"},timezone:void 0,locale:void 0,campaign:{},referrer:o};function Kt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Wt,e=1<arguments.length?arguments[1]:void 0,n=t.initialized,r=e.type,o=e.campaign;switch(r){case st.campaign:return W(W({},t),{campaign:o});case st.offline:return W(W({},t),{offline:!0});case st.online:return W(W({},t),{offline:!1});default:return n?t:W(W(W({},Wt),t),{initialized:!0})}}var Qt=["plugins","reducers","storage"];function Zt(){return B(z,[]),function(o){return function(t,e,n){var n=o(t,e,n),r=n.dispatch;return Object.assign(n,{dispatch:function(t){var e=t.action||t;return y[m][z].push(e),r(t)}})}}}function te(){return function(){return tt(tt.apply(null,arguments),Zt())}}function ee(t){return t?"[object Array]"===Object.prototype.toString.call(t)?t:[t]:[]}function ne(t,e,n){var r,o,i=0<arguments.length&&void 0!==t?t:{},t=1<arguments.length?e:void 0,e=2<arguments.length?n:void 0,n=F();return t&&(D[n]=(r=t,o=function(t){for(var e,n=t||Array.prototype.slice.call(arguments),r=0;r<n.length;r++)if(R(n[r])){e=n[r];break}return e}(e),function(t){o&&o(t),r(t)})),W(W({},i),{},{rid:n,ts:(new Date).getTime()},t?{hasCallback:!0}:{})}function re(t){function u(){throw new Error("Abort disabled inListener")}var r,e=0<arguments.length&&void 0!==t?t:{},n=e.reducers||{},o=e.initialUser||{},a=(e.plugins||[]).reduce(function(t,n){if(R(n))return t.middlewares=t.middlewares.concat(n),t;if(n.NAMESPACE&&(n.name=n.NAMESPACE),!n.name)throw new Error(at+"1");var e=n.EVENTS?Object.keys(n.EVENTS).map(function(t){return n.EVENTS[t]}):[],r=!(!1===n.enabled),o=!(n.config&&!1===n.config.enabled);t.pluginEnabled[n.name]=r&&o,delete n.enabled,n.methods&&(t.methods[n.name]=Object.keys(n.methods).reduce(function(t,e){var r;return t[e]=(r=n.methods[e],function(){for(var t=Array.prototype.slice.call(arguments),e=new Array(r.length),n=0;n<t.length;n++)e[n]=t[n];return e[e.length]=N,r.apply({instance:N},e)}),t},{}),delete n.methods);e=Object.keys(n).concat(e),e=new Set(t.events.concat(e));if(t.events=Array.from(e),t.pluginsArray=t.pluginsArray.concat(n),t.plugins[n.name])throw new Error(n.name+"AlreadyLoaded");return t.plugins[n.name]=n,t.plugins[n.name].loaded||(t.plugins[n.name].loaded=function(){return!0}),t},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),i=e.storage||{getItem:G,setItem:B,removeItem:J},l=(r=i,function(t,e,n){e=e.getState("user")[t];if(e)return e;if(n&&V(n)&&n[t])return n[t];n=dt(r)[t];return n||G(ht(t))||null}),c=a.plugins,s=a.events.filter(function(t){return!ct.includes(t)}).sort(),f=new Set(s.concat(ut).filter(function(t){return!ct.includes(t)})),p=Array.from(f).sort(),d=function(){return c},h=new Ct,g=h.addMiddleware,m=h.removeMiddleware,y=h.dynamicMiddlewares,v=$(),t=dt(i),f=W(W(W(W({},t),o),v.an_uid?{userId:v.an_uid}:{}),v.an_aid?{anonymousId:v.an_aid}:{});f.anonymousId||(f.anonymousId=F());var b,w,x,S,I,E,O,k,j,P,_,h=W({enable:function(e,n){return new Promise(function(t){M.dispatch({type:st.enablePlugin,plugins:ee(e),_:{originalAction:st.enablePlugin}},t,[n])})},disable:function(e,n){return new Promise(function(t){M.dispatch({type:st.disablePlugin,plugins:ee(e),_:{originalAction:st.disablePlugin}},t,[n])})}},a.methods),N={identify:(x=Y(K.mark(function t(e,n,r,o){var i,a,u,c,s;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=q(e)?e:null,a=V(e)?e:n,u=r||{},c=N.user(),B(ht(ot),i),s=i||a.userId||l(ot,N,a),t.abrupt("return",new Promise(function(t){M.dispatch(W({type:st.identifyStart,userId:s,traits:a||{},options:u,anonymousId:c.anonymousId},c.id&&c.id!==i&&{previousId:c.id}),t,[n,r,o])}));case 7:case"end":return t.stop()}},t)})),function(t,e,n,r){return x.apply(this,arguments)}),track:(w=Y(K.mark(function t(e,n,r,o){var i,a,u;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((i=V(e)?e.event:e)&&q(i)){t.next=3;break}throw new Error("EventMissing");case 3:return a=V(e)?e:n||{},u=V(r)?r:{},t.abrupt("return",new Promise(function(t){M.dispatch({type:st.trackStart,event:i,properties:a,options:u,userId:l(ot,N,n),anonymousId:l(it,N,n)},t,[n,r,o])}));case 6:case"end":return t.stop()}},t)})),function(t,e,n,r){return w.apply(this,arguments)}),page:(b=Y(K.mark(function t(e,n,r){var o,i;return K.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=V(e)?e:{},i=V(n)?n:{},t.abrupt("return",new Promise(function(t){M.dispatch({type:st.pageStart,properties:Ht(o),options:i,userId:l(ot,N,o),anonymousId:l(it,N,o)},t,[e,n,r])}));case 3:case"end":return t.stop()}},t)})),function(t,e,n){return b.apply(this,arguments)}),user:function(t){if(t===ot||"id"===t)return l(ot,N);if(t===it||"anonId"===t)return l(it,N);var e=N.getState("user");return t?C(e,t):e},reset:function(e){return new Promise(function(t){M.dispatch({type:st.resetStart},t,e)})},ready:function(t){return N.on(st.ready,t)},on:function(n,r){if(!n||!R(r))return!1;if(n===st.bootstrap)throw new Error(".on disabled for "+n);var o=/Start$|Start:/;if("*"===n){var t=function(t){return function(e){return function(t){return t.type.match(o)&&r({payload:t,instance:N,plugins:c}),e(t)}}},e=function(t){return function(e){return function(t){return t.type.match(o)||r({payload:t,instance:N,plugins:c}),e(t)}}};return g(t,oe),g(e,ie),function(){m(t,oe),m(e,ie)}}function i(t){return function(e){return function(t){return t.type===n&&r({payload:t,instance:N,plugins:c,abort:u}),e(t)}}}var a=n.match(o)?oe:ie;return g(i,a),function(){return m(i,a)}},once:function(t,e){if(!t||!R(e))return!1;if(t===st.bootstrap)throw new Error(".once disabled for "+t);var n=N.on(t,function(t){t=t.payload;e({payload:t,instance:N,plugins:c,abort:u}),n()});return n},getState:function(t){var e=M.getState();return t?C(e,t):Object.assign({},e)},dispatch:function(t){var e,n=q(t)?{type:t}:t;if(e=n.type,ut.includes(e))throw new Error("reserved action "+n.type);t=t._||{},t=W(W({},n),{},{_:W({originalAction:n.type},t)});M.dispatch(t)},enablePlugin:h.enable,disablePlugin:h.disable,plugins:h,storage:{getItem:i.getItem,setItem:function(t,e,n){M.dispatch({type:st.setItemStart,key:t,value:e,options:n})},removeItem:function(t,e){M.dispatch({type:st.removeItemStart,key:t,options:e})}},setAnonymousId:function(t,e){N.storage.setItem(et,t,e)},events:{all:p,core:ut,plugins:s}},s=a.middlewares.concat([function(t){return function(e){return function(t){return t.meta||(t.meta=ne()),e(t)}}},y(oe),Mt(N,d,{all:p,plugins:s}),(j=i,function(t){return function(i){return function(t){var e=t.type,n=t.key,r=t.value,o=t.options;if(e===st.setItem||e===st.removeItem){if(t.abort)return i(t);e===st.setItem?j.setItem(n,r,o):j.removeItem(n,o)}return i(t)}}}),(k=(O=N).storage.setItem,function(l){return function(s){return function(t){var r,e,n,o,i,a,u,c;return t.type===st.bootstrap&&(r=t.params,e=t.user,n=t.persistedUser,i=t.initialUser,o=n.userId===e.userId,n.anonymousId!==e.anonymousId&&k(et,e.anonymousId),o||k(nt,e.userId),i.traits&&k(rt,W(W({},o&&n.traits?n.traits:{}),i.traits)),(i=Object.keys(t.params)).length&&(a=r.an_uid,u=r.an_event,c=i.reduce(function(t,e){var n;return(e.match(lt)||e.match(/^(d|g)clid/))&&(n=e.replace(lt,""),t.campaign["campaign"===n?"name":n]=r[e]),e.match(ft)&&(t.props[e.replace(ft,"")]=r[e]),e.match(pt)&&(t.traits[e.replace(pt,"")]=r[e]),t},{campaign:{},props:{},traits:{}}),l.dispatch(W(W({type:st.params,raw:r},c),a?{userId:a}:{})),a&&setTimeout(function(){return O.identify(a,c.traits)},0),u&&setTimeout(function(){return O.track(u,c.props)},0),Object.keys(c.campaign).length&&l.dispatch({type:st.campaign,campaign:c.campaign}))),s(t)}}}),(S=(s=(s=N).storage).setItem,I=s.removeItem,E=s.getItem,function(u){return function(a){return function(t){var e,n,r=t.userId,o=t.traits,i=t.options;return t.type===st.reset&&([nt,rt,et].forEach(function(t){I(t)}),[ot,it,"traits"].forEach(function(t){J(ht(t))})),t.type===st.identify&&(E(et)||S(et,F()),e=E(nt),n=E(rt)||{},e&&e!==r&&u.dispatch({type:st.userIdChanged,old:{userId:e,traits:n},new:{userId:r,traits:o},options:i}),r&&S(nt,r),o&&S(rt,W(W({},n),o))),a(t)}}}),y(ie)]),y={context:Kt,user:(_=i,function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(e.type===st.setItemEnd){if(e.key===et)return W(W({},t),{anonymousId:e.value});if(e.key===nt)return W(W({},t),{userId:e.value})}switch(e.type){case st.identify:return Object.assign({},t,{userId:e.userId,traits:W(W({},t.traits),e.traits)});case st.reset:return[nt,et,rt].forEach(function(t){_.removeItem(t)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}),page:Yt,track:$t,plugins:(P=d,function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,n={};if("initialize:aborted"===e.type)return t;if(/^registerPlugin:([^:]*)$/.test(e.type)){var r=Ut(e.type,"registerPlugin"),o=P()[r];if(!o||!r)return t;var i=e.enabled;return n[r]={enabled:i,initialized:!!i&&Boolean(!o.initialize),loaded:!!i&&Boolean(o.loaded()),config:o.config||{}},W(W({},t),n)}if(/^initialize:([^:]*)$/.test(e.type)){i=Ut(e.type,st.initialize),o=P()[i];return o&&i?(n[i]=W(W({},t[i]),{initialized:!0,loaded:Boolean(o.loaded())}),W(W({},t),n)):t}if(/^ready:([^:]*)$/.test(e.type))return n[e.name]=W(W({},t[e.name]),{loaded:!0}),W(W({},t),n);switch(e.type){case st.disablePlugin:return W(W({},t),Rt(e.plugins,!1,t));case st.enablePlugin:return W(W({},t),Rt(e.plugins,!0,t));default:return t}}),queue:Gt},i=tt,d=tt;U&&e.debug&&((L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)&&(i=L({trace:!0,traceLimit:25})),d=function(){return 0===arguments.length?Zt():V(X(arguments[0]))?te():te().apply(null,arguments)});var A,T,L=(A=e,Object.keys(A).reduce(function(t,e){return Qt.includes(e)||(t[e]=A[e]),t},{})),e={context:L,user:f,plugins:a.pluginsArray.reduce(function(t,e){var n=e.name,r=e.config,o=e.loaded,i=a.pluginEnabled[n];return t[n]={enabled:i,initialized:!!i&&Boolean(!e.initialize),loaded:Boolean(o()),config:r||{}},t},{})},M=Q(Z(W(W({},y),n)),e,d(i(function(){for(var t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return function(i){return function(t,e,n){var e=i(t,e,n),r=e.dispatch,n=[],o={getState:e.getState,dispatch:function(t){return r(t)}},n=a.map(function(t){return t(o)}),r=tt.apply(void 0,H(n))(e.dispatch);return W(W({},e),{},{dispatch:r})}}}.apply(void 0,H(s)))));M.dispatch=(T=M.dispatch,function(t,e,n){n=ne(t.meta,e,ee(n)),n=W(W({},t),{meta:n});return T.apply(null,[n])});s=Object.keys(c);M.dispatch({type:st.bootstrap,plugins:s,config:L,params:v,user:f,initialUser:o,persistedUser:t});var z=s.filter(function(t){return a.pluginEnabled[t]}),D=s.filter(function(t){return!a.pluginEnabled[t]});return M.dispatch({type:st.registerPlugins,plugins:s,enabled:a.pluginEnabled}),a.pluginsArray.map(function(t,e){var n=t.bootstrap,r=t.config,o=t.name;n&&R(n)&&n({instance:N,config:r,payload:t}),M.dispatch({type:st.registerPluginType(o),name:o,enabled:a.pluginEnabled[o],plugin:t}),a.pluginsArray.length===e+1&&M.dispatch({type:st.initializeStart,plugins:z,disabled:D})}),N}var oe="before",ie="after",ae="cookie",ue=fe(),ce=pe,se=pe;function le(t){return ue?pe(t,"",-1):J(t)}function fe(){if(void 0!==ue)return ue;var t="cookiecookie";try{pe(t,t),ue=-1!==document.cookie.indexOf(t),le(t)}catch(t){ue=!1}return ue}function pe(t,e,n,r,o,i){if("undefined"!=typeof window){var a=1<arguments.length;return!1===ue&&(a?B(t,e):G(t)),a?document.cookie=t+"="+encodeURIComponent(e)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+t+"=")[1]||"").split(";")[0])}}var de="localStorage",N=w.bind(null,"localStorage");v("localStorage","getItem",G),v("localStorage","setItem",B),v("localStorage","removeItem",J);var he="sessionStorage",o=w.bind(null,"sessionStorage");function ge(t){var e=t;try{if("true"===(e=JSON.parse(t)))return!0;if("false"===e)return!1;if(V(e))return e;parseFloat(e)===e&&(e=parseFloat(e))}catch(t){}if(null!==e&&""!==e)return e}v("sessionStorage","getItem",G),v("sessionStorage","setItem",B),v("sessionStorage","removeItem",J);var me=N(),ye=o(),ve=fe();function be(t,e){if(t){var n=we(e),r=!Ee(n),o=xe(n)?ge(localStorage.getItem(t)):void 0;if(r&&!l(o))return o;e=Se(n)?ge(ce(t)):void 0;if(r&&e)return e;n=Ie(n)?ge(sessionStorage.getItem(t)):void 0;if(r&&n)return n;t=G(t);return r?t:{localStorage:o,sessionStorage:n,cookie:e,global:t}}}function we(t){return t?q(t)?t:t.storage:i}function xe(t){return me&&Oe(t,de)}function Se(t){return ve&&Oe(t,ae)}function Ie(t){return ye&&Oe(t,he)}function Ee(t){return t===a||"all"===t}function Oe(t,e){return t===i||t===e||Ee(t)}function ke(t,e,n){return{location:t,current:e,previous:n}}var je={setItem:function(t,e,n){if(t&&!l(e)){var r={},o=we(n),i=JSON.stringify(e),n=!Ee(o);return xe(o)&&(r[de]=ke(de,e,ge(localStorage.getItem(t))),localStorage.setItem(t,i),n)?r[de]:Se(o)&&(r[ae]=ke(ae,e,ge(ce(t))),se(t,i),n)?r[ae]:Ie(o)&&(r[he]=ke(he,e,ge(sessionStorage.getItem(t))),sessionStorage.setItem(t,i),n)?r[he]:(r[h]=ke(h,e,G(t)),B(t,e),n?r[h]:r)}},getItem:be,removeItem:function(t,e){if(t){var n=we(e),r=be(t,a),e={};return!l(r.localStorage)&&xe(n)&&(localStorage.removeItem(t),e[de]=r.localStorage),!l(r.cookie)&&Se(n)&&(le(t),e[ae]=r.cookie),!l(r.sessionStorage)&&Ie(n)&&(sessionStorage.removeItem(t),e[he]=r.sessionStorage),!l(r.global)&&Oe(n,h)&&(J(t),e[h]=r.global),e}}};function Pe(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return re(n(n({},{storage:je}),t))}return t.Analytics=Pe,t.CONSTANTS=c,t.EVENTS=st,t.default=Pe,t.init=Pe,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
