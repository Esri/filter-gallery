var e=require("@analytics/global-storage-utils"),t=require("@analytics/cookie-utils"),r=require("@analytics/localstorage-utils"),o=require("@analytics/session-storage-utils"),n=require("@analytics/type-utils");function i(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(n.isObject(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}var a=r.hasLocalStorage(),s=o.hasSessionStorage(),u=t.hasCookies();function l(r,o){if(r){var a=g(o),s=!A(a),u=f(a)?i(localStorage.getItem(r)):void 0;if(s&&!n.isUndefined(u))return u;var l=S(a)?i(t.getCookie(r)):void 0;if(s&&l)return l;var O=L(a)?i(sessionStorage.getItem(r)):void 0;if(s&&O)return O;var c=e.get(r);return s?c:{localStorage:u,sessionStorage:O,cookie:l,global:c}}}function O(a,s,u){if(a&&!n.isUndefined(s)){var l={},O=g(u),c=JSON.stringify(s),m=!A(O);return f(O)&&(l[r.LOCAL_STORAGE]=p(r.LOCAL_STORAGE,s,i(localStorage.getItem(a))),localStorage.setItem(a,c),m)?l[r.LOCAL_STORAGE]:S(O)&&(l[t.COOKIE]=p(t.COOKIE,s,i(t.getCookie(a))),t.setCookie(a,c),m)?l[t.COOKIE]:L(O)&&(l[o.SESSION_STORAGE]=p(o.SESSION_STORAGE,s,i(sessionStorage.getItem(a))),sessionStorage.setItem(a,c),m)?l[o.SESSION_STORAGE]:(l[e.GLOBAL]=p(e.GLOBAL,s,e.get(a)),e.set(a,s),m?l[e.GLOBAL]:l)}}function c(i,a){if(i){var s=g(a),u=l(i,n.ALL),O={};return!n.isUndefined(u.localStorage)&&f(s)&&(localStorage.removeItem(i),O[r.LOCAL_STORAGE]=u.localStorage),!n.isUndefined(u.cookie)&&S(s)&&(t.removeCookie(i),O[t.COOKIE]=u.cookie),!n.isUndefined(u.sessionStorage)&&L(s)&&(sessionStorage.removeItem(i),O[o.SESSION_STORAGE]=u.sessionStorage),!n.isUndefined(u.global)&&m(s,e.GLOBAL)&&(e.remove(i),O[e.GLOBAL]=u.global),O}}function g(e){return e?n.isString(e)?e:e.storage:n.ANY}function f(e){return a&&m(e,r.LOCAL_STORAGE)}function S(e){return u&&m(e,t.COOKIE)}function L(e){return s&&m(e,o.SESSION_STORAGE)}function A(e){return e===n.ALL||"all"===e}function m(e,t){return e===n.ANY||e===t||A(e)}function p(e,t,r){return{location:e,current:t,previous:r}}var b={setItem:O,getItem:l,removeItem:c};Object.defineProperty(exports,"GLOBAL",{enumerable:!0,get:function(){return e.GLOBAL}}),Object.defineProperty(exports,"globalContext",{enumerable:!0,get:function(){return e.globalContext}}),Object.defineProperty(exports,"COOKIE",{enumerable:!0,get:function(){return t.COOKIE}}),Object.defineProperty(exports,"getCookie",{enumerable:!0,get:function(){return t.getCookie}}),Object.defineProperty(exports,"hasCookies",{enumerable:!0,get:function(){return t.hasCookies}}),Object.defineProperty(exports,"removeCookie",{enumerable:!0,get:function(){return t.removeCookie}}),Object.defineProperty(exports,"setCookie",{enumerable:!0,get:function(){return t.setCookie}}),Object.defineProperty(exports,"LOCAL_STORAGE",{enumerable:!0,get:function(){return r.LOCAL_STORAGE}}),Object.defineProperty(exports,"hasLocalStorage",{enumerable:!0,get:function(){return r.hasLocalStorage}}),Object.defineProperty(exports,"ALL",{enumerable:!0,get:function(){return n.ALL}}),Object.defineProperty(exports,"ANY",{enumerable:!0,get:function(){return n.ANY}}),exports.default=b,exports.getItem=l,exports.removeItem=c,exports.setItem=O;
//# sourceMappingURL=analytics-util-storage.js.map
