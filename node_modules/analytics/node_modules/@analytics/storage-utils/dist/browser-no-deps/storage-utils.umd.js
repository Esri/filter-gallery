!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@analytics/global-storage-utils"),require("@analytics/cookie-utils"),require("@analytics/localstorage-utils"),require("@analytics/session-storage-utils"),require("@analytics/type-utils")):"function"==typeof define&&define.amd?define(["exports","@analytics/global-storage-utils","@analytics/cookie-utils","@analytics/localstorage-utils","@analytics/session-storage-utils","@analytics/type-utils"],t):t((e||self).utilStorage={},e.globalStorageUtils,e.cookieUtils,e.localstorageUtils,e.sessionStorageUtils,e.typeUtils)}(this,function(e,t,o,r,n,i){function a(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(i.isObject(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}var s=r.hasLocalStorage(),l=n.hasSessionStorage(),u=o.hasCookies();function c(e,r){if(e){var n=O(r),s=!m(n),l=S(n)?a(localStorage.getItem(e)):void 0;if(s&&!i.isUndefined(l))return l;var u=L(n)?a(o.getCookie(e)):void 0;if(s&&u)return u;var c=d(n)?a(sessionStorage.getItem(e)):void 0;if(s&&c)return c;var f=t.get(e);return s?f:{localStorage:l,sessionStorage:c,cookie:u,global:f}}}function f(e,s,l){if(e&&!i.isUndefined(s)){var u={},c=O(l),f=JSON.stringify(s),g=!m(c);return S(c)&&(u[r.LOCAL_STORAGE]=A(r.LOCAL_STORAGE,s,a(localStorage.getItem(e))),localStorage.setItem(e,f),g)?u[r.LOCAL_STORAGE]:L(c)&&(u[o.COOKIE]=A(o.COOKIE,s,a(o.getCookie(e))),o.setCookie(e,f),g)?u[o.COOKIE]:d(c)&&(u[n.SESSION_STORAGE]=A(n.SESSION_STORAGE,s,a(sessionStorage.getItem(e))),sessionStorage.setItem(e,f),g)?u[n.SESSION_STORAGE]:(u[t.GLOBAL]=A(t.GLOBAL,s,t.get(e)),t.set(e,s),g?u[t.GLOBAL]:u)}}function g(e,a){if(e){var s=O(a),l=c(e,i.ALL),u={};return!i.isUndefined(l.localStorage)&&S(s)&&(localStorage.removeItem(e),u[r.LOCAL_STORAGE]=l.localStorage),!i.isUndefined(l.cookie)&&L(s)&&(o.removeCookie(e),u[o.COOKIE]=l.cookie),!i.isUndefined(l.sessionStorage)&&d(s)&&(sessionStorage.removeItem(e),u[n.SESSION_STORAGE]=l.sessionStorage),!i.isUndefined(l.global)&&b(s,t.GLOBAL)&&(t.remove(e),u[t.GLOBAL]=l.global),u}}function O(e){return e?i.isString(e)?e:e.storage:i.ANY}function S(e){return s&&b(e,r.LOCAL_STORAGE)}function L(e){return u&&b(e,o.COOKIE)}function d(e){return l&&b(e,n.SESSION_STORAGE)}function m(e){return e===i.ALL||"all"===e}function b(e,t){return e===i.ANY||e===t||m(e)}function A(e,t,o){return{location:e,current:t,previous:o}}var y={setItem:f,getItem:c,removeItem:g};Object.defineProperty(e,"GLOBAL",{enumerable:!0,get:function(){return t.GLOBAL}}),Object.defineProperty(e,"globalContext",{enumerable:!0,get:function(){return t.globalContext}}),Object.defineProperty(e,"COOKIE",{enumerable:!0,get:function(){return o.COOKIE}}),Object.defineProperty(e,"getCookie",{enumerable:!0,get:function(){return o.getCookie}}),Object.defineProperty(e,"hasCookies",{enumerable:!0,get:function(){return o.hasCookies}}),Object.defineProperty(e,"removeCookie",{enumerable:!0,get:function(){return o.removeCookie}}),Object.defineProperty(e,"setCookie",{enumerable:!0,get:function(){return o.setCookie}}),Object.defineProperty(e,"LOCAL_STORAGE",{enumerable:!0,get:function(){return r.LOCAL_STORAGE}}),Object.defineProperty(e,"hasLocalStorage",{enumerable:!0,get:function(){return r.hasLocalStorage}}),Object.defineProperty(e,"ALL",{enumerable:!0,get:function(){return i.ALL}}),Object.defineProperty(e,"ANY",{enumerable:!0,get:function(){return i.ANY}}),e.default=y,e.getItem=c,e.removeItem=g,e.setItem=f});
//# sourceMappingURL=storage-utils.umd.js.map
