!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).utilStorage={})}(this,function(e){var t="undefined",o="object",n="any";"undefined"==typeof process||process;var r="undefined"!=typeof window;function i(e,t){return typeof t===e}"undefined"!=typeof Deno&&Deno,r&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),i.bind(null,"function");var a=i.bind(null,"string"),l=i.bind(null,"undefined");i.bind(null,"boolean");var u="global",s="__global__",f=typeof self===o&&self.self===self&&self||typeof global===o&&global.global===global&&global||void 0;function c(e){return f[s][e]}function g(e,t){return f[s][e]=t}function d(e){delete f[s][e]}function m(e,t,o){var n;try{if(p(e)){var r=window[e];n=r[t].bind(r)}}catch(e){}return n||o}f[s]||(f[s]={});var v={};function p(e){if(typeof v[e]!==t)return v[e];try{var o=window[e];o.setItem(t,t),o.removeItem(t)}catch(o){return v[e]=!1}return v[e]=!0}var S="cookie",b=k(),I=w,y=w;function O(e){return b?w(e,"",-1):d(e)}function k(){if(void 0!==b)return b;var e="cookiecookie";try{w(e,e),b=-1!==document.cookie.indexOf(e),O(e)}catch(e){b=!1}return b}function w(e,t,o,n,r,i){if("undefined"!=typeof window){var a=arguments.length>1;return!1===b&&(a?g(e,t):c(e)),a?document.cookie=e+"="+encodeURIComponent(t)+(o?"; expires="+new Date(+new Date+1e3*o).toUTCString()+(n?"; path="+n:"")+(r?"; domain="+r:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var h="localStorage",C=p.bind(null,"localStorage");m("localStorage","getItem",c),m("localStorage","setItem",g),m("localStorage","removeItem",d);var j="sessionStorage",A=p.bind(null,"sessionStorage");function L(e){var t=e;try{if("true"===(t=JSON.parse(e)))return!0;if("false"===t)return!1;if(function(e){if(!function(e){return e&&("object"==typeof e||null!==e)}(e))return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch(e){}if(null!==t&&""!==t)return t}m("sessionStorage","getItem",c),m("sessionStorage","setItem",g),m("sessionStorage","removeItem",d);var x=C(),_=A(),D=k();function N(e,t){if(e){var o=R(t),n=!G(o),r=U(o)?L(localStorage.getItem(e)):void 0;if(n&&!l(r))return r;var i=E(o)?L(I(e)):void 0;if(n&&i)return i;var a=F(o)?L(sessionStorage.getItem(e)):void 0;if(n&&a)return a;var u=c(e);return n?u:{localStorage:r,sessionStorage:a,cookie:i,global:u}}}function T(e,t,o){if(e&&!l(t)){var n={},r=R(o),i=JSON.stringify(t),a=!G(r);return U(r)&&(n[h]=B(h,t,L(localStorage.getItem(e))),localStorage.setItem(e,i),a)?n[h]:E(r)&&(n[S]=B(S,t,L(I(e))),y(e,i),a)?n[S]:F(r)&&(n[j]=B(j,t,L(sessionStorage.getItem(e))),sessionStorage.setItem(e,i),a)?n[j]:(n[u]=B(u,t,c(e)),g(e,t),a?n[u]:n)}}function P(e,t){if(e){var o=R(t),n=N(e,"*"),r={};return!l(n.localStorage)&&U(o)&&(localStorage.removeItem(e),r[h]=n.localStorage),!l(n.cookie)&&E(o)&&(O(e),r[S]=n.cookie),!l(n.sessionStorage)&&F(o)&&(sessionStorage.removeItem(e),r[j]=n.sessionStorage),!l(n.global)&&J(o,u)&&(d(e),r[u]=n.global),r}}function R(e){return e?a(e)?e:e.storage:n}function U(e){return x&&J(e,h)}function E(e){return D&&J(e,S)}function F(e){return _&&J(e,j)}function G(e){return"*"===e||"all"===e}function J(e,t){return e===n||e===t||G(e)}function B(e,t,o){return{location:e,current:t,previous:o}}var K={setItem:T,getItem:N,removeItem:P};e.ALL="*",e.ANY=n,e.COOKIE=S,e.GLOBAL=u,e.LOCAL_STORAGE=h,e.default=K,e.getCookie=I,e.getItem=N,e.globalContext=f,e.hasCookies=k,e.hasLocalStorage=C,e.removeCookie=O,e.removeItem=P,e.setCookie=y,e.setItem=T});
//# sourceMappingURL=storage-utils.umd.js.map
