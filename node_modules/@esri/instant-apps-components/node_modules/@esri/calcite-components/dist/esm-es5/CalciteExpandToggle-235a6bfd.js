/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 */
import{f as forceUpdate,h}from"./index-66803519.js";import{a as getElementDir}from"./dom-f24e866c.js";import{S as SLOTS}from"./resources-584acd9b.js";import{S as SLOTS$1}from"./resources-7c6029b6.js";var overflowActionsDebounceInMs=150;var groupBufferHeight=2;var getMaxActionCount=function(e){var t=e.height,r=e.actionHeight,o=e.groupCount;return Math.floor((t-o*groupBufferHeight)/r)};var getOverflowCount=function(e){var t=e.actionCount,r=e.actionHeight,o=e.height,n=e.groupCount;return Math.max(t-getMaxActionCount({height:o,actionHeight:r,groupCount:n}),0)};var queryActions=function(e){return Array.from(e.querySelectorAll("calcite-action")).filter((function(e){return e.closest("calcite-action-menu")?e.slot===SLOTS.trigger:true}))};var overflowActions=function(e){var t=e.actionGroups,r=e.expanded,o=e.overflowCount;var n=o;t.reverse().forEach((function(e){var t=0;var o=queryActions(e).reverse();o.forEach((function(e){if(e.slot===SLOTS$1.menuActions){e.removeAttribute("slot");e.textEnabled=r}}));if(n>0){o.some((function(e){var r=o.filter((function(e){return!e.slot}));if(r.length>1&&o.length>2&&!e.closest("calcite-action-menu")){e.textEnabled=true;e.setAttribute("slot",SLOTS$1.menuActions);t++;if(t>1){n--}}return n<1}))}forceUpdate(e)}))};var ICONS={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function getCalcitePosition(e,t){var r;return e||((r=t.closest("calcite-shell-panel"))===null||r===void 0?void 0:r.position)||"start"}function toggleChildActionText(e){var t=e.parent,r=e.expanded;queryActions(t).filter((function(e){return e.slot!==SLOTS$1.menuActions})).forEach((function(e){return e.textEnabled=r}));t.querySelectorAll("calcite-action-group").forEach((function(e){return e.expanded=r}))}var setTooltipReference=function(e){var t=e.tooltip,r=e.referenceElement,o=e.expanded,n=e.ref;if(t){t.referenceElement=!o&&r}if(n){n(r)}return r};var CalciteExpandToggle=function(e){var t=e.expanded,r=e.intlExpand,o=e.intlCollapse,n=e.toggle,i=e.el,a=e.position,c=e.tooltip,l=e.ref,u=e.scale;var s=getElementDir(i)==="rtl";var f=t?o:r;var v=[ICONS.chevronsLeft,ICONS.chevronsRight];if(s){v.reverse()}var g=getCalcitePosition(a,i)==="end";var p=g?v[1]:v[0];var d=g?v[0]:v[1];var m=h("calcite-action",{dir:s?"rtl":"ltr",icon:t?p:d,onClick:n,ref:function(e){return setTooltipReference({tooltip:c,referenceElement:e,expanded:t,ref:l})},scale:u,text:f,textEnabled:t});return c?h("calcite-tooltip-manager",null,m):m};export{CalciteExpandToggle as C,overflowActions as a,getOverflowCount as g,overflowActionsDebounceInMs as o,queryActions as q,toggleChildActionText as t};