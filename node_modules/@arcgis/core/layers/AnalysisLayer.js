/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import s from"../core/Logger.js";import{isNone as t}from"../core/maybe.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import"../core/arrayUtils.js";import"../core/has.js";import"../core/accessorSupport/ensureType.js";import{subclass as o}from"../core/accessorSupport/decorators/subclass.js";import{owningCollectionProperty as a}from"../core/support/OwningCollection.js";import{tryProjectWithZConversion as n}from"../geometry/projection.js";import l from"./Layer.js";import{AnalysesCollection as i}from"../support/AnalysesCollection.js";const y=s.getLogger("esri.layers.AnalysisLayer");let p=class extends l{constructor(e){super(e),this.type="analysis",this.analyses=new i}destroy(){this.analyses.destroy()}add(e){this.analyses.add(e)}addMany(e){this.analyses.addMany(e)}remove(e){this.analyses.remove(e)}removeMany(e){this.analyses.removeMany(e)}get fullExtent(){return t(this.analyses)?null:this._calculateFullExtent()}_calculateFullExtent(){return this.analyses.reduce(((e,s)=>{const r=s.extent;if(t(r))return e;const o=n(r,this.spatialReference);var a,l,i;return t(o)?(y.warnOnce("#fullExtent",`Extent of analysis (type: '${s.type}', id: '${null!=(a=s.id)?a:"no id"}') could not be projected to the spatial reference of the AnalysisLayer (title: '${null!=(l=this.title)?l:"no title"}', id: '${null!=(i=this.id)?i:"no id"}')`),e):t(e)?o:o.union(e)}),null)}};e([r({json:{read:!1},readOnly:!0})],p.prototype,"type",void 0),e([r(a(i,"analyses"))],p.prototype,"analyses",void 0),e([r({readOnly:!0})],p.prototype,"fullExtent",null),p=e([o("esri.layers.AnalysisLayer")],p);const c=p;export{c as default};
