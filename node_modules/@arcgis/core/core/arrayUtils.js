/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{isNone as n}from"./maybe.js";import t from"./RandomLCG.js";function r(n){if(!n)return;return n.length>0?n[0]:void 0}function e(n){if(!n)return;const t=n.length;return t>0?n[t-1]:void 0}function o(n){return n}function f(n,t=o){if(!n||0===n.length)return;let r=n[0],e=t(r);for(let o=1;o<n.length;++o){const f=n[o],u=Number(t(f));u>e&&(e=u,r=f)}return r}function u(n,t=o){return f(n,(n=>-t(n)))}function i(n,t){return t?n.filter(((n,r,e)=>e.findIndex(t.bind(null,n))===r)):n.filter(((n,t,r)=>r.indexOf(n)===t))}function l(t,r,e){if(n(t)&&n(r))return!0;if(n(t)||n(r)||t.length!==r.length)return!1;if(e){for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==r[n])return!1;return!0}function c(n,t,r){let e,o;return r?(e=t.filter((t=>!n.some((n=>r(n,t))))),o=n.filter((n=>!t.some((t=>r(t,n)))))):(e=t.filter((t=>!n.includes(t))),o=n.filter((n=>!t.includes(n)))),{added:e,removed:o}}function s(n,t,r){return n&&t?r?n.filter((function(n){return t.findIndex((function(t){return r(n,t)}))>-1})):n.filter((function(n){return t.indexOf(n)>-1})):[]}function a(n){return n&&"number"==typeof n.length}function h(n,t){const r=n.length;if(0===r)return[];const e=[];for(let o=0;o<r;o+=t)e.push(n.slice(o,o+t));return e}const d=!!Array.prototype.fill;function g(n,t){if(d)return new Array(n).fill(t);const r=new Array(n);for(let e=0;e<n;e++)r[e]=t;return r}function m(n,t){void 0===t&&(t=n,n=0);const r=new Array(t-n);for(let e=n;e<t;e++)r[e-n]=e;return r}function p(n,t,r){const e=n.length;let o=0,f=e-1;for(;o<f;){const r=o+Math.floor((f-o)/2);t>n[r]?o=r+1:f=r}const u=n[o];return r?t>=n[e-1]?-1:u===t?o:o-1:u===t?o:-1}function x(n,t,r){if(!n||0===n.length)return;const e=n.length-1,o=n[0];if(t<=r(o))return o;const f=n[e];if(t>=r(f))return f;let u=0,i=0,l=e;for(;u<l;){i=u+Math.floor((l-u)/2);const o=n[i],f=r(o);if(f===t)return o;if(t<f){if(i>0){const e=n[i-1],u=r(e);if(t>u)return t-u>=f-t?o:e}l=i}else{if(i<e){const e=n[i+1],u=r(e);if(t<u)return t-f>=u-t?e:o}u=i+1}}return n[i]}function M(n){return n.reduce(((n,t)=>n.concat(t||[])),[])}class w{constructor(){this.last=0}}const y=new w;function b(n,t,r,e){e=e||y;const o=Math.max(0,e.last-10);for(let u=o;u<r;++u)if(n[u]===t)return e.last=u,u;const f=Math.min(o,r);for(let u=0;u<f;++u)if(n[u]===t)return e.last=u,u;return-1}function v(n,t,r,e){const o=null==r?n.length:r,f=b(n,t,o,e);if(-1!==f)return n[f]=n[o-1],null==r&&n.pop(),t}const A=new Set;function O(n,t,r=n.length,e=t.length,o,f){if(0===e||0===r)return r;A.clear();for(let i=0;i<e;++i)A.add(t[i]);o=o||y;const u=Math.max(0,o.last-10);for(let i=u;i<r;++i)if(A.has(n[i])&&(f&&f.push(n[i]),A.delete(n[i]),n[i]=n[r-1],--r,--i,0===A.size||0===r))return A.clear(),r;for(let i=0;i<u;++i)if(A.has(n[i])&&(f&&f.push(n[i]),A.delete(n[i]),n[i]=n[r-1],--r,--i,0===A.size||0===r))return A.clear(),r;return A.clear(),r}function j(n,t,r){const e=n.length;if(t>=e)return n.slice(0);const o=z(r),f=new Set,u=[];for(;u.length<t;){const t=Math.floor(o()*e);f.has(t)||(f.add(t),u.push(n[t]))}return u}function z(n){return n?(S.seed=n,()=>S.getFloat()):Math.random}function I(n,t){const r=z(t);for(let e=n.length-1;e>0;e--){const t=Math.floor(r()*(e+1)),o=n[e];n[e]=n[t],n[t]=o}return n}const S=new t;function C(n,t){const r=n.indexOf(t);return-1!==r?(n.splice(r,1),t):null}export{w as PositionHint,x as binaryFindClosest,p as binaryIndexOf,g as constant,c as difference,l as equals,r as first,M as flatten,b as indexOf,s as intersect,a as isArrayLike,e as last,f as max,u as min,j as pickRandom,m as range,C as remove,v as removeUnordered,O as removeUnorderedMany,I as shuffle,h as splitIntoChunks,i as unique};
