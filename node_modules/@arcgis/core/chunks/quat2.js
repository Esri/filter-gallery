/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{a as t}from"./quatf64.js";import{c as a}from"./vec3f64.js";import{E as n}from"./common.js";import{A as s,B as r}from"./mat4.js";import{a as o,b as e,d as u,e as c,f as i,l as f,h}from"./quat.js";function M(t,a,n){const s=.5*n[0],r=.5*n[1],o=.5*n[2],e=a[0],u=a[1],c=a[2],i=a[3];return t[0]=e,t[1]=u,t[2]=c,t[3]=i,t[4]=s*i+r*c-o*u,t[5]=r*i+o*e-s*c,t[6]=o*i+s*u-r*e,t[7]=-s*e-r*u-o*c,t}function m(t,a){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*a[0],t[5]=.5*a[1],t[6]=.5*a[2],t[7]=0,t}function b(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function l(t,a){const n=p;s(n,a);const o=x;return r(o,a),M(t,n,o),t}const p=t(),x=a();function d(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t}function q(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function j(t,a,n,s,r,o,e,u,c){return t[0]=a,t[1]=n,t[2]=s,t[3]=r,t[4]=o,t[5]=e,t[6]=u,t[7]=c,t}const g=o;function y(t,a){return t[0]=a[4],t[1]=a[5],t[2]=a[6],t[3]=a[7],t}const A=o;function B(t,a){return t[4]=a[0],t[5]=a[1],t[6]=a[2],t[7]=a[3],t}function R(t,a){const n=a[4],s=a[5],r=a[6],o=a[7],e=-a[0],u=-a[1],c=-a[2],i=a[3];return t[0]=2*(n*i+o*e+s*c-r*u),t[1]=2*(s*i+o*u+r*e-n*c),t[2]=2*(r*i+o*c+n*u-s*e),t}function _(t,a,n){const s=a[0],r=a[1],o=a[2],e=a[3],u=.5*n[0],c=.5*n[1],i=.5*n[2],f=a[4],h=a[5],M=a[6],m=a[7];return t[0]=s,t[1]=r,t[2]=o,t[3]=e,t[4]=e*u+r*i-o*c+f,t[5]=e*c+o*u-s*i+h,t[6]=e*i+s*c-r*u+M,t[7]=-s*u-r*c-o*i+m,t}function v(t,a,n){let s=-a[0],r=-a[1],o=-a[2],u=a[3];const c=a[4],i=a[5],f=a[6],h=a[7],M=c*u+h*s+i*o-f*r,m=i*u+h*r+f*s-c*o,b=f*u+h*o+c*r-i*s,l=h*u-c*s-i*r-f*o;return e(t,a,n),s=t[0],r=t[1],o=t[2],u=t[3],t[4]=M*u+l*s+m*o-b*r,t[5]=m*u+l*r+b*s-M*o,t[6]=b*u+l*o+M*r-m*s,t[7]=l*u-M*s-m*r-b*o,t}function z(t,a,n){let s=-a[0],r=-a[1],o=-a[2],e=a[3];const c=a[4],i=a[5],f=a[6],h=a[7],M=c*e+h*s+i*o-f*r,m=i*e+h*r+f*s-c*o,b=f*e+h*o+c*r-i*s,l=h*e-c*s-i*r-f*o;return u(t,a,n),s=t[0],r=t[1],o=t[2],e=t[3],t[4]=M*e+l*s+m*o-b*r,t[5]=m*e+l*r+b*s-M*o,t[6]=b*e+l*o+M*r-m*s,t[7]=l*e-M*s-m*r-b*o,t}function D(t,a,n){let s=-a[0],r=-a[1],o=-a[2],e=a[3];const u=a[4],i=a[5],f=a[6],h=a[7],M=u*e+h*s+i*o-f*r,m=i*e+h*r+f*s-u*o,b=f*e+h*o+u*r-i*s,l=h*e-u*s-i*r-f*o;return c(t,a,n),s=t[0],r=t[1],o=t[2],e=t[3],t[4]=M*e+l*s+m*o-b*r,t[5]=m*e+l*r+b*s-M*o,t[6]=b*e+l*o+M*r-m*s,t[7]=l*e-M*s-m*r-b*o,t}function E(t,a,n){const s=n[0],r=n[1],o=n[2],e=n[3];let u=a[0],c=a[1],i=a[2],f=a[3];return t[0]=u*e+f*s+c*o-i*r,t[1]=c*e+f*r+i*s-u*o,t[2]=i*e+f*o+u*r-c*s,t[3]=f*e-u*s-c*r-i*o,u=a[4],c=a[5],i=a[6],f=a[7],t[4]=u*e+f*s+c*o-i*r,t[5]=c*e+f*r+i*s-u*o,t[6]=i*e+f*o+u*r-c*s,t[7]=f*e-u*s-c*r-i*o,t}function T(t,a,n){const s=a[0],r=a[1],o=a[2],e=a[3];let u=n[0],c=n[1],i=n[2],f=n[3];return t[0]=s*f+e*u+r*i-o*c,t[1]=r*f+e*c+o*u-s*i,t[2]=o*f+e*i+s*c-r*u,t[3]=e*f-s*u-r*c-o*i,u=n[4],c=n[5],i=n[6],f=n[7],t[4]=s*f+e*u+r*i-o*c,t[5]=r*f+e*c+o*u-s*i,t[6]=o*f+e*i+s*c-r*u,t[7]=e*f-s*u-r*c-o*i,t}function L(t,a,s,r){if(Math.abs(r)<n)return d(t,a);const o=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);r*=.5;const e=Math.sin(r),u=e*s[0]/o,c=e*s[1]/o,i=e*s[2]/o,f=Math.cos(r),h=a[0],M=a[1],m=a[2],b=a[3];t[0]=h*f+b*u+M*i-m*c,t[1]=M*f+b*c+m*u-h*i,t[2]=m*f+b*i+h*c-M*u,t[3]=b*f-h*u-M*c-m*i;const l=a[4],p=a[5],x=a[6],q=a[7];return t[4]=l*f+q*u+p*i-x*c,t[5]=p*f+q*c+x*u-l*i,t[6]=x*f+q*i+l*c-p*u,t[7]=q*f-l*u-p*c-x*i,t}function Q(t,a,n){return t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t[3]=a[3]+n[3],t[4]=a[4]+n[4],t[5]=a[5]+n[5],t[6]=a[6]+n[6],t[7]=a[7]+n[7],t}function k(t,a,n){const s=a[0],r=a[1],o=a[2],e=a[3],u=n[4],c=n[5],i=n[6],f=n[7],h=a[4],M=a[5],m=a[6],b=a[7],l=n[0],p=n[1],x=n[2],d=n[3];return t[0]=s*d+e*l+r*x-o*p,t[1]=r*d+e*p+o*l-s*x,t[2]=o*d+e*x+s*p-r*l,t[3]=e*d-s*l-r*p-o*x,t[4]=s*f+e*u+r*i-o*c+h*d+b*l+M*x-m*p,t[5]=r*f+e*c+o*u-s*i+M*d+b*p+m*l-h*x,t[6]=o*f+e*i+s*c-r*u+m*d+b*x+h*p-M*l,t[7]=e*f-s*u-r*c-o*i+b*d-h*l-M*p-m*x,t}const w=k;function C(t,a,n){return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t}const F=i;function G(t,a,n,s){const r=1-s;return F(a,n)<0&&(s=-s),t[0]=a[0]*r+n[0]*s,t[1]=a[1]*r+n[1]*s,t[2]=a[2]*r+n[2]*s,t[3]=a[3]*r+n[3]*s,t[4]=a[4]*r+n[4]*s,t[5]=a[5]*r+n[5]*s,t[6]=a[6]*r+n[6]*s,t[7]=a[7]*r+n[7]*s,t}function H(t,a){const n=P(a);return t[0]=-a[0]/n,t[1]=-a[1]/n,t[2]=-a[2]/n,t[3]=a[3]/n,t[4]=-a[4]/n,t[5]=-a[5]/n,t[6]=-a[6]/n,t[7]=a[7]/n,t}function I(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t[4]=-a[4],t[5]=-a[5],t[6]=-a[6],t[7]=a[7],t}const J=f,O=J,P=h,X=P;function Y(t,a){let n=P(a);if(n>0){n=Math.sqrt(n);const s=a[0]/n,r=a[1]/n,o=a[2]/n,e=a[3]/n,u=a[4],c=a[5],i=a[6],f=a[7],h=s*u+r*c+o*i+e*f;t[0]=s,t[1]=r,t[2]=o,t[3]=e,t[4]=(u-s*h)/n,t[5]=(c-r*h)/n,t[6]=(i-o*h)/n,t[7]=(f-e*h)/n}return t}function Z(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function K(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]}function N(t,a){const s=t[0],r=t[1],o=t[2],e=t[3],u=t[4],c=t[5],i=t[6],f=t[7],h=a[0],M=a[1],m=a[2],b=a[3],l=a[4],p=a[5],x=a[6],d=a[7];return Math.abs(s-h)<=n*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(r-M)<=n*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-m)<=n*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(e-b)<=n*Math.max(1,Math.abs(e),Math.abs(b))&&Math.abs(u-l)<=n*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(c-p)<=n*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(i-x)<=n*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(f-d)<=n*Math.max(1,Math.abs(f),Math.abs(d))}const S=Object.freeze({__proto__:null,fromRotationTranslation:M,fromTranslation:m,fromRotation:b,fromMat4:l,copy:d,identity:q,set:j,getReal:g,getDual:y,setReal:A,setDual:B,getTranslation:R,translate:_,rotateX:v,rotateY:z,rotateZ:D,rotateByQuatAppend:E,rotateByQuatPrepend:T,rotateAroundAxis:L,add:Q,multiply:k,mul:w,scale:C,dot:F,lerp:G,invert:H,conjugate:I,length:J,len:O,squaredLength:P,sqrLen:X,normalize:Y,str:Z,exactEquals:K,equals:N});export{H as A,I as B,J as C,O as D,P as E,X as F,Y as G,Z as H,K as I,N as J,m as a,b,l as c,d,y as e,M as f,g,A as h,q as i,B as j,R as k,z as l,D as m,E as n,T as o,L as p,S as q,v as r,j as s,_ as t,Q as u,k as v,w,C as x,F as y,G as z};
