/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{pt2px as e}from"../../../../core/screenUtils.js";import"../../../../libs/maquette/projection.js";import{createProjector as t}from"../../../../libs/maquette/projector.js";import{renderColorRampPreviewHTML as o}from"../../../../symbols/support/symbolUtils.js";import"../../../support/widgetUtils.js";import"../../../../core/has.js";import"../../../../core/Logger.js";import{tsx as i}from"../../../support/jsxFactory.js";const l=t(),n=10,r=20,s=10,a=20,c={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function f(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?i("svg",{height:"4",width:"10"},i("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):i("svg",{height:"10",width:"10"},i("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function p(e,t="vertical"){const o=document.createElement("div");return o.style.height=`${r}px`,o.className=c.univariateAboveAndBelowSymbol,null!=e&&(o.style.opacity=e.toString()),l.append(o,f.bind(null,t)),o}function u(t,o,i="vertical",l){t.infos.forEach(((t,n)=>{if(l&&2===n)t.preview=p(o,i);else{const o=e(t.size)+("horizontal"===i?a:s),l="div"===t.preview.tagName.toLowerCase(),n=l?t.preview:document.createElement("div");n.className=c.univariateAboveAndBelowSymbol,"horizontal"===i?n.style.width=`${o}px`:n.style.height=`${o}px`,l||n.appendChild(t.preview),t.preview=n}}))}function m(t,o="classic"){const i=t.infos;return"classic"===o?(e(i[0].size)+s)/2:(e(i[0].size)-e(i[i.length-1].size))/2}function v(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=o("full"===t.type?i:"above"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList});return l.className=c.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function h(t,o,i,l="vertical"){let c=0;const f=t.infos,p=Math.floor(f.length/2),u="full"===o||"above"===o?0:p,m="full"===o||"below"===o?f.length-1:p;for(let v=u;v<=m;v++)if(i&&v===p)c+="horizontal"===l?n:r;else{c+=e(f[v].size)+("horizontal"===l?a:s)}return Math.round(c)}function y(t,o,i,l="vertical"){const c=h(t,o,i,l),f=t.infos,p=Math.floor(f.length/2),u="full"===o||"above"===o?0:p,m="full"===o||"below"===o?f.length-1:p,v="full"===o?f[u].size+f[m].size:"above"===o?f[u].size:f[m].size,y=i?"vertical"===l?r:n:0,d="vertical"===l?s*("full"===o?2:1):a*("full"===o?2:1);return Math.round(c-(e(v)/2+y/2+d/2))}function d(e,t,o="vertical"){const i=e.infos;let l=i.find((({type:e})=>"size-ramp"===e)),n=i.find((({type:e})=>"color-ramp"===e));var r,s;(l&&(l={...l},l.infos=[...l.infos],u(l,t,o,!0)),n&&(n={...n},n.infos=[...n.infos]),"horizontal"===o)&&(null==(r=l)||r.infos.reverse(),null==(s=n)||s.infos.reverse());return{sizeRampElement:l,colorRampElement:n}}function g(e,t="vertical"){const o=e.infos;let i=o.find((({type:e})=>"size-ramp"===e)),l=o.find((({type:e})=>"color-ramp"===e));var n,r;(i&&(i={...i},i.infos=[...i.infos],u(i,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),"horizontal"===t)&&(null==(n=i)||n.infos.reverse(),null==(r=l)||r.infos.reverse());return{sizeRampElement:i,colorRampElement:l}}export{d as getUnivariateAboveAndBelowRampElements,m as getUnivariateColorRampMargin,v as getUnivariateColorRampPreview,y as getUnivariateColorRampSize,g as getUnivariateColorSizeRampElements,h as getUnivariateSizeRampSize};
