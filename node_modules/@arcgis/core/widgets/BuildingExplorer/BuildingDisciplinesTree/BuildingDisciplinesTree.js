/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as i}from"../../../chunks/tslib.es6.js";import{on as e,watch as s,initial as t}from"../../../core/reactiveUtils.js";import{property as o}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import{subclass as r}from"../../../core/accessorSupport/decorators/subclass.js";import d from"../../Widget.js";import l from"../BuildingDisciplinesViewModel.js";import p from"./BuildingDisciplinesNode.js";import"../../support/widgetUtils.js";import"../../../core/Logger.js";import{tsx as h}from"../../support/jsxFactory.js";const a={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},g={base:`${"esri-building-disciplines-tree"}`};let n=class extends d{constructor(i){super(i),this._defaultViewModel=new l,this.viewModel=this._defaultViewModel,this.messages=a,this.toggleSiblingsVisibility=!1,this._childWidgets=[],this._updateChildWidgets=()=>{this._destroyChildWidgets(),this.viewModel&&(this._childWidgets=this.viewModel.root.children.toArray().reverse().map((i=>new p({node:i,messages:this.messages,toggleSiblingsVisibility:this.toggleSiblingsVisibility}))))}}initialize(){this.own(e((()=>{var i,e;return null==(i=this.viewModel)||null==(e=i.root)?void 0:e.children}),"after-changes",this._updateChildWidgets,{onListenerAdd:this._updateChildWidgets,onListenerRemove:this._updateChildWidgets}),s((()=>[this.messages,this.toggleSiblingsVisibility]),this._updateChildWidgets,t))}destroy(){this._destroyChildWidgets(),this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}render(){return h("div",{role:"tree",class:g.base},this._childWidgets.map((i=>i.render())))}_destroyChildWidgets(){this._childWidgets.forEach((i=>i.destroy())),this._childWidgets=[]}};i([o({type:l})],n.prototype,"viewModel",void 0),i([o()],n.prototype,"messages",void 0),i([o({nonNullable:!0})],n.prototype,"toggleSiblingsVisibility",void 0),i([o()],n.prototype,"_childWidgets",void 0),n=i([r("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesTree")],n);const c=n;export{c as default};
