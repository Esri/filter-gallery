/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import r from"../../../Graphic.js";import e from"../../../core/Accessor.js";import{HandleOwnerMixin as o}from"../../../core/HandleOwner.js";import{init as s}from"../../../core/watchUtils.js";import{property as i}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import"../../../core/accessorSupport/ensureType.js";import{subclass as a}from"../../../core/accessorSupport/decorators/subclass.js";import{graphicCallback as c}from"../support/featureUtils.js";let n=class extends(o(e)){constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(s(this,"creator",(t=>{this._destroyContent(),this._createContent(t)})))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:r,destroyer:e}=this;t&&(c(e,{graphic:r}).catch((()=>null)),this._set("created",null))}async _createContent(t){const{graphic:r}=this,e=c(t,{graphic:r}).catch((()=>null));this._loadingPromise=e,this.notifyChange("state");const o=await e;e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",o))}};t([i({readOnly:!0})],n.prototype,"created",void 0),t([i()],n.prototype,"creator",void 0),t([i()],n.prototype,"destroyer",void 0),t([i({type:r})],n.prototype,"graphic",void 0),t([i({readOnly:!0})],n.prototype,"state",null),n=t([a("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n);const p=n;export{p as default};
