/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import e from"./core/has.js";import{getInterceptor as t,addQueryParameter as r}from"./core/urlUtils.js";export{buildDate,commitHash as revision}from"./support/revision.js";const a="4.23",s={async request(e,r){var a;const{default:s}=await import("./request.js"),n=e.options,o=n.responseType;n.signal=null==r?void 0:r.signal,n.responseType="native"===o||"native-request-init"===o?"native-request-init":["blob","json","text"].includes(o)&&null!=(a=t(e.url))&&a.after?o:"array-buffer";const i=await s(e.url,n),u={data:i.data,ssl:i.ssl};switch(i.requestOptions.responseType){case"native-request-init":return delete u.data.signal,u;case"blob":u.data=await u.data.arrayBuffer();break;case"json":u.data=(new TextEncoder).encode(JSON.stringify(u.data)).buffer;break;case"text":u.data=(new TextEncoder).encode(u.data).buffer}return{result:u,transferList:[u.data]}}};let n;function o(e){n=e}function i(e){const t=n&&n.findCredential(e);return t&&t.token?r(e,"token",t.token):e}e("host-webworker")||(e("edge")||e("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");export{i as addTokenParameter,n as id,o as setId,a as version,s as workerMessages};
