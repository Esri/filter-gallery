/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{readSymbol as e}from"../../symbols.js";import o from"../../core/Error.js";import{isSome as s,isNone as n}from"../../core/maybe.js";import t from"../Symbol3D.js";import{to3D as r}from"./symbolConversion.js";import i from"../WebStyleSymbol.js";function m(e,o,n,t){const r=b(e,{},{context:t,isLabelSymbol:!1});s(r)&&(o[n]=r)}function l(e,o,n,t){const r=b(e,{},{context:t,isLabelSymbol:!0});s(r)&&(o[n]=r)}function b(e,m,l){if(n(e))return null;const{context:b,isLabelSymbol:a}=l;if(b&&"web-scene"===b.origin&&!(e instanceof t)&&!(e instanceof i)){const n=r(e,{retainCIM:!0,hasLabelingContext:a});return s(n.symbol)?n.symbol.write(m,b):(b.messages&&b.messages.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:b,error:n.error})),null)}return b&&"web-map"===b.origin&&"web-style"===e.type?(b.messages&&b.messages.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:b})),null):e.write(m,b)}function a(o,s){return e(o,null,s)}export{a as fromJSON,m as write,l as writeLabelSymbol};
