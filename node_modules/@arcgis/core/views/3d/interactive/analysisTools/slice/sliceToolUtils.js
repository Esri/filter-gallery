/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import"../../../../../geometry.js";import e from"../../../../../analysis/SlicePlane.js";import{neverReached as t}from"../../../../../core/compilerUtils.js";import r from"../../../../../core/Logger.js";import{rad2deg as s,deg2rad as i}from"../../../../../core/mathUtils.js";import{isNone as n,isSome as o}from"../../../../../core/maybe.js";import{castRenderScreenPointArray3 as a}from"../../../../../core/screenUtils.js";import{g as c,b as l,h as u,m as d,r as m,i as p,j as g,k as f}from"../../../../../chunks/mat4.js";import{c as b}from"../../../../../chunks/mat4f64.js";import{r as h}from"../../../../../chunks/quat.js";import{a as T,g as y,d as O,c as w,n as I,b as E,l as R,f as j,p as A,s as M,v as L}from"../../../../../chunks/vec3.js";import{a as P,c as k,f as C}from"../../../../../chunks/vec3f64.js";import{tryProjectWithZConversion as _}from"../../../../../geometry/projection.js";import{Axis as v}from"../../../../../geometry/support/Axis.js";import{r as N,f as U,i as V,c as S,n as x,u as G}from"../../../../../chunks/boundedPlane.js";import{fromPositionAndNormal as F,fromVectorsAndPoint as H}from"../../../../../geometry/support/plane.js";import{create as D}from"../../../../../geometry/support/ray.js";import{angleAroundAxis as z}from"../../../../../geometry/support/vector.js";import{sv3d as X,sm4d as Y,sq4d as Z}from"../../../../../geometry/support/vectorStacks.js";import{applyProjectionAndElevationAlignment as B}from"../../../analysis/support/projectionUtils.js";import{Manipulator3D as W}from"../../Manipulator3D.js";import{calculateTranslateRotateFromBases as q}from"../../manipulatorUtils.js";import{SHIFT_RESTART_TIP_RADIUS as $,RESIZE_HANDLE_EDGE_PADDING_FRAC as J,VERTICAL_DOT_THRESHOLD as K,SMALL_ANGLE_DOT_THRESHOLD as Q,PLANE_MIN_BASIS_SCREEN_LEN2 as ee,INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as te,SHIFT_RESTART_OFFSET_DISTANCE as re,SHIFT_RESTART_ARROW_OUTLINE_WIDTH as se,SHIFT_RESTART_ARROW_TIP_COLOR as ie,SHIFT_RESTART_ARROW_CAP_COLOR as ne,SHIFT_RESTART_TUBE_COLOR as oe,SHIFT_RESTART_OUTLINE_COLOR as ae,SHIFT_RESTART_CALLOUT_COLOR as ce,ROTATE_HEADING_OFFSET_DISTANCE as le,ROTATE_HEADING_DISC_RADIUS as ue,ROTATE_HEADING_CALLOUT_COLOR as de,PLANE_OUTLINE_COLOR as me,PLANE_OUTLINE_WIDTH as pe,PLANE_BACKGROUND_COLOR as ge,GRID_COLOR as fe,RESIZE_HANDLE_CORNER_INPUT_RADIUS as be,RESIZE_HANDLE_EDGE_INPUT_RADIUS as he,ROTATE_HEADING_TIP_LENGTH as Te,ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as ye,RESIZE_HANDLE_COLOR as Oe,DISPLAY_FOCUS_MULTIPLIER as we,RESIZE_HANDLE_EDGE_WIDTH as Ie,SHIFT_RESTART_ARROW_LENGTH as Ee,SHIFT_RESTART_TUBE_RADIUS as Re,SHIFT_RESTART_TIP_LENGTH as je,SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as Ae,SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as Me,RESIZE_HANDLE_CORNER_WIDTH as Le}from"./sliceToolConfig.js";import{LineVisualElement as Pe}from"../../visualElements/LineVisualElement.js";import{SlicePlaneVisualElement as ke}from"../../visualElements/SlicePlaneVisualElement.js";import{RenderCoordsHelper as Ce}from"../../../support/RenderCoordsHelper.js";import{fromRender as _e}from"../../../support/geometryUtils/ray.js";import{CullFaceOptions as ve}from"../../../webgl-engine/lib/basicInterfaces.js";import{Geometry as Ne}from"../../../webgl-engine/lib/Geometry.js";import Ue from"../../../webgl-engine/lib/GeometryUtil.js";import{RenderOccludedFlag as Ve}from"../../../webgl-engine/lib/Material.js";import{VertexAttribute as Se}from"../../../webgl-engine/lib/VertexAttribute.js";import{ColorMaterial as xe}from"../../../webgl-engine/materials/ColorMaterial.js";import{ImageMaterial as Ge}from"../../../webgl-engine/materials/ImageMaterial.js";import{NativeLineMaterial as Fe}from"../../../webgl-engine/materials/NativeLineMaterial.js";import{RibbonLineMaterial as He}from"../../../webgl-engine/materials/RibbonLineMaterial.js";import{ManipulatorStateCustomFlags as De,ManipulatorStateFlags as ze}from"../../../../interactive/interfaces.js";import Xe from"../../../../../geometry/Extent.js";const Ye=r.getLogger("esri.views.3d.interactive.analysisTools.slice.sliceToolUtils");function Ze(e,t,r,s,i,n,o,a){return Be(t,o.worldUpAtPosition(e,X.get()),i,n,a.basis1,a.basis2),T(a.basis1,a.basis1,r),T(a.basis2,a.basis2,s),y(a.origin,e),H(a.basis2,a.basis1,a.origin,a.plane),a}function Be(e,t,r,s,i,n){const o=O(e,t),a=X.get(),c=X.get();switch(s===Ct.HORIZONTAL_OR_VERTICAL?Math.abs(o)>K?Ct.HORIZONTAL:Ct.VERTICAL:s){case Ct.VERTICAL:{const s=Math.abs(o)<=Q?e:r.viewUp;w(a,s,t),y(c,t);break}case Ct.HORIZONTAL:w(a,r.viewUp,t),w(c,t,a);break;case Ct.TILTED:{const s=Math.abs(o)<=Q?t:r.viewUp;w(a,s,e),w(c,e,a);break}}const l=w(X.get(),a,c);O(l,r.viewForward)>0&&T(c,c,-1),I(i,a),I(n,c)}function We(e,t,r){const s=t.worldUpAtPosition(e.origin,X.get()),i=e.basis1,n=It(e,s),o=Math.round(n/Nt)*Nt;return N(e,o-n,i,r)}function qe(e,t,r,s,i,n){const o=y(X.get(),i.origin);E(o,o,T(X.get(),i.basis1,e.direction[0]<0?1:-1)),E(o,o,T(X.get(),i.basis2,e.direction[1]<0?1:-1));const a=R(i.basis1),c=R(i.basis2),l=j(X.get(),r,o),u=j(X.get(),t,o);let d=0,m=0;if(ut(e)){const t=lt(i),r=lt(n);d=a-.5*e.direction[0]*O(i.basis1,u)/a,m=c-.5*e.direction[1]*O(i.basis2,u)/c;const s=r/t;d*=s,m*=s}const p=d+.5*e.direction[0]*O(i.basis1,l)/a,g=m+.5*e.direction[1]*O(i.basis2,l)/c,f=T(X.get(),i.basis1,p/a),b=T(X.get(),i.basis2,g/c);(p<=0||at(n.origin,f,s)<=ee)&&y(f,n.basis1),(g<=0||at(n.origin,b,s)<=ee)&&y(b,n.basis2);const h=y(X.get(),o);return E(h,h,T(X.get(),f,e.direction[0]<0?-1:1)),E(h,h,T(X.get(),b,e.direction[1]<0?-1:1)),U(h,f,b,n)}function $e(e,t){return te*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function Je(e,t,r,s){const i=w(X.get(),t,r);return w(i,i,t),F(e,i,s)}function Ke(e,t){return q(e.basis1,e.basis2,e.origin,t)}function Qe(e,t,r,s){const i=t.worldUpAtPosition(e.origin,X.get()),n=X.get();switch(r){case kt.HEADING:y(n,i);break;case kt.TILT:y(n,e.basis1)}return F(e.origin,n,s)}function et(e,t,r,s){const i=ot(r,nt.NEGATIVE_X),n=Y.get();c(n,t,i.edge*Math.PI/2);const o=I(X.get(),i.basis);let l=T(X.get(),o,i.direction*s.computeScreenPixelSizeAt(i.position)*re);E(l,l,i.position);const u=s.projectToRenderScreen(l,a(X.get())),d=tt(s,u);_e(s,u,vt),I(vt.direction,vt.direction);const m=X.get();!d&&V(r,vt,m)&&(l=m),n[12]=0,n[13]=0,n[14]=0,e.modelTransform=n,e.renderLocation=P(l),d?e.state|=_t:e.state&=~_t}function tt(e,t){const[r,s,i,n]=e.viewport,o=Math.min(i,n)/16;let a=!0;return t[0]<r+o?(t[0]=r+o,a=!1):t[0]>r+i-o&&(t[0]=r+i-o,a=!1),t[1]<s+o?(t[1]=s+o,a=!1):t[1]>s+n-o&&(t[1]=s+n-o,a=!1),a}function rt(e,t,r,s){const i=R(s.basis1),n=R(s.basis2),o=ct(s),a=lt(s),c=M(X.get(),0,0,0);E(c,T(X.get(),s.basis1,t.direction[0]),T(X.get(),s.basis2,t.direction[1])),E(c,s.origin,c);let m=0,p=1;if(ut(t))1===t.direction[0]&&-1===t.direction[1]?m=Nt:1===t.direction[0]&&1===t.direction[1]?m=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(m=3*Math.PI/2),p=a;else{const e=0!==t.direction[0]?1:2;m=1===e?Nt:0,p=(1===e?n:i)-o}const g=l(Y.get(),m);u(g,g,M(X.get(),p,p,p)),d(g,r,g),g[12]=0,g[13]=0,g[14]=0,e.modelTransform=g,e.renderLocation=c}function st(e,t,r,s){const i=s.worldUpAtPosition(r.origin,X.get()),n=ot(r,nt.POSITIVE_X),o=l(Y.get(),n.edge*Math.PI/2);m(o,o,-It(r,i)),d(o,t,o),o[12]=0,o[13]=0,o[14]=0,e.modelTransform=o,e.renderLocation=n.position}function it(e,t,r){const s=ot(r,nt.POSITIVE_Y),i=l(Y.get(),s.edge*Math.PI/2);m(i,i,Nt),d(i,t,i),i[12]=0,i[13]=0,i[14]=0,e.modelTransform=i,e.renderLocation=s.position}var nt;function ot(e,t){switch(t){case nt.POSITIVE_X:return{basis:e.basis1,direction:1,position:E(X.get(),e.origin,e.basis1),edge:t};case nt.POSITIVE_Y:return{basis:e.basis2,direction:1,position:E(X.get(),e.origin,e.basis2),edge:t};case nt.NEGATIVE_X:return{basis:e.basis1,direction:-1,position:j(X.get(),e.origin,e.basis1),edge:t};case nt.NEGATIVE_Y:return{basis:e.basis2,direction:-1,position:j(X.get(),e.origin,e.basis2),edge:t}}}function at(e,t,r){const s=r.projectToRenderScreen(E(X.get(),e,t),a(X.get())),i=r.projectToRenderScreen(j(X.get(),e,t),a(X.get()));return A(j(s,s,i))}function ct(e){const t=R(e.basis1),r=R(e.basis2);return J*Math.min(t,r)}function lt(e){return ct(e)}function ut(e){return 0!==e.direction[0]&&0!==e.direction[1]}function dt(e,t=St.CENTER_ON_ARROW){const r=t===St.CENTER_ON_CALLOUT?re:0,s=[C(r,0,-Ee/2),C(r,0,Ee/2)],i=Tt(s,!0),n=(e,t)=>bt(s,s,{tubeRadius:Re,tipRadius:$,tipLength:je,tubeFocusMultiplier:Ae,tipFocusMultiplier:Me,padding:e,bothEnds:!0,flat:null,focusTipLength:!0,addCap:t}),o=n(0,!1),a=n(se,!0),c=new xe({color:ie,cullFace:ve.Back,renderOccluded:Ve.Opaque}),l=new xe({color:ne,cullFace:ve.Back,renderOccluded:Ve.Opaque}),u=new xe({color:oe,cullFace:ve.Back,renderOccluded:Ve.Opaque}),d=new xe({color:ae,transparent:!0,writeDepth:!1,cullFace:ve.Front,renderOccluded:Ve.Transparent}),m=Ue.createPolylineGeometry([[r,0,0],[r-re,0,0]]),p=Ue.createPolylineGeometry([[r,0,0],[r-re,0,0]]),g=new Fe({color:ce,renderOccluded:Ve.OccludeAndTransparent});return new W({view:e,renderObjects:[...o.normal.map((({part:e,geometry:t,transform:r})=>({geometry:t,material:"tip"===e?c:"cap"===e?l:u,transform:r,stateMask:ze.Unfocused|Pt}))),...a.normal.map((({geometry:e,transform:t})=>({geometry:e,material:d,transform:t,stateMask:ze.Unfocused|Pt}))),{geometry:m,material:g,stateMask:ze.Unfocused|Pt|_t},...o.focused.map((({part:e,geometry:t,transform:r})=>({geometry:t,material:"tip"===e?c:"cap"===e?l:u,transform:r,stateMask:ze.Focused|Pt}))),...a.focused.map((({geometry:e,transform:t})=>({geometry:e,material:d,transform:t,stateMask:ze.Focused|Pt}))),{geometry:p,material:g,stateMask:ze.Focused|Pt|_t}],autoScaleRenderObjects:!1,collisionType:{type:"line",paths:[i]},collisionPriority:1,radius:$,state:Pt})}function mt(e,t){const r=new Ge({transparent:!0,writeDepth:!1,textureId:t.id,renderOccluded:Ve.Opaque}),s=le,i=ue,n=i*ye,o=e=>{const t=new Uint32Array([0,1,2,2,3,0]);return new Ne([[Se.POSITION,{size:3,data:[s-e,-e,0,s+e,-e,0,s+e,e,0,s-e,e,0],exclusive:!0}],[Se.UV0,{size:2,data:[0,0,1,0,1,1,0,1]}]],[[Se.POSITION,t],[Se.UV0,t]])},a=Ue.createPolylineGeometry([[0,0,0],[s-i,0,0]]),c=Ue.createPolylineGeometry([[0,0,0],[s-n,0,0]]),l=new Fe({color:de,renderOccluded:Ve.OccludeAndTransparent}),u=[{geometry:o(i),material:r,stateMask:ze.Unfocused|Pt},{geometry:a,material:l,stateMask:ze.Unfocused|Pt},{geometry:o(n),material:r,stateMask:ze.Focused|Pt},{geometry:c,material:l,stateMask:ze.Focused|Pt}];return new W({view:e,renderObjects:u,autoScaleRenderObjects:!1,collisionType:{type:"disc",direction:[0,0,1],offset:[s,0,0]},collisionPriority:1,radius:i/2,state:Pt})}function pt(e){const t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]];return new Pe({view:e,attached:!0,color:me,width:pe,writeDepthEnabled:!1,renderOccluded:Ve.OccludeAndTransparent,geometry:[t]})}function gt(e){return new ke({view:e,attached:!0,backgroundColor:[...ge],gridColor:fe,gridWidth:4,renderOccluded:Ve.OccludeAndTransparent})}function ft(e,t){const r=ut(t),s=r?[C(1,0,0),C(0,0,0),C(0,1,0)]:[C(1,0,0),C(-1,0,0)],i=Ue.createPolylineGeometry(s),n=Oe,o=e=>new He({color:n,width:e,renderOccluded:Ve.OccludeAndTransparent}),a=()=>new Fe({color:n,renderOccluded:Ve.OccludeAndTransparent}),c=r?Le:Ie,l=c*we,u=Ie,d=e=>e>1?o(e):a(),m=[{geometry:i,material:d(c),stateMask:ze.Unfocused|Ut},{geometry:i,material:d(l),stateMask:ze.Focused|Ut},{geometry:i,material:d(u),stateMask:Vt}],p=new W({view:e,renderObjects:m,collisionType:{type:"line",paths:[s]},autoScaleRenderObjects:!1,worldSized:!0,radius:r?be:he});return p.state=Ut,p}function bt(e,t,r){const s=s=>{const i=(s?t:e).slice(0),n=j(X.get(),i[0],i[1]);I(n,n);const a=j(X.get(),i[i.length-1],i[i.length-2]);if(I(a,a),r.padding>0){const e=T(k(),a,-r.padding);if(i[i.length-1]=E(e,e,i[i.length-1]),r.bothEnds){const e=T(k(),n,-r.padding);i[0]=E(e,e,i[0])}}const c=s?r.tipFocusMultiplier:1,l=r.tipLength*(r.focusTipLength?c:1),m=r.tipRadius*c,y=p(Y.get());if(r.padding>0){const e=l/4,t=M(X.get(),0,e,0),s=1+r.padding/e;g(y,y,t),u(y,y,M(X.get(),s,s,s)),g(y,y,T(t,t,-1/s))}const O=p(b()),w=C(0,1,0),R=f(b(),h(Z.get(),w,a));R[12]=i[i.length-1][0],R[13]=i[i.length-1][1],R[14]=i[i.length-1][2],d(R,R,y);const A=[{part:"tube",geometry:ht(r.tubeRadius*(s?r.tubeFocusMultiplier:1)+r.padding,r.flat,i),transform:O}];let L,P;if(o(r.flat)?L=Ue.createExtrudedTriangle(l,m,m,r.flat.thickness):(L=Ue.createConeGeometry(l,m,24,!1,!1,!0),P=Ue.createConeGeometry(l,m,24,!1,!0,!1)),A.push({part:"tip",geometry:L,transform:R}),P&&A.push({part:"cap",geometry:P,transform:R}),r.bothEnds){const e=f(b(),h(Z.get(),w,n));e[12]=i[0][0],e[13]=i[0][1],e[14]=i[0][2],d(e,e,y),A.push({part:"tip",geometry:L,transform:e}),P&&A.push({part:"cap",geometry:P,transform:e})}return A};return{normal:s(!1),focused:s(!0)}}function ht(e,t,r){const s=[];if(o(t))s.push([e,t.thickness/2],[-e,t.thickness/2],[-e,-t.thickness/2],[e,-t.thickness/2]);else{const t=12;for(let r=0;r<t;r++){const i=r/t*2*Math.PI;s.push([Math.cos(i)*e,Math.sin(i)*e])}}return Ue.createPathExtrusionGeometry(s,r,[],[],!1)}function Tt(e,t){const r=j(k(),e[e.length-1],e[e.length-2]);if(I(r,r),T(r,r,Te),E(r,r,e[e.length-1]),t){const t=j(k(),e[0],e[1]);return I(t,t),T(t,t,Te),E(t,t,e[0]),[t,...e,r]}return[...e,r]}function yt(t,r,i,o=new e){if(n(t))return null;const{renderCoordsHelper:a}=r,c=a.fromRenderCoords(t.origin,r.spatialReference);if(n(c))return null;const l=_(c,i);if(n(l))return null;o.position=l;const u=a.worldUpAtPosition(t.origin,X.get()),d=a.worldBasisAtPosition(t.origin,v.Y,X.get()),m=2*R(t.basis1),p=2*R(t.basis2),g=Ce.renderUnitScaleFactor(r.spatialReference,i);return o.width=m*g,o.height=p*g,o.tilt=s(It(t,u)),o.heading=s(Et(t,u,d)),o}function Ot(e,t,r){if(n(e)||n(e.position))return null;const{spatialReference:s}=e.position,i=wt(At(e,{renderCoordsHelper:t,spatialReference:s},r),t,s);return!e.position.hasZ&&o(i)&&(i.zmin=null,i.zmax=null),i}function wt(e,t,r){if(n(e))return null;const s=e.origin,i=X.get(),o=X.get(),a=X.get(),c=X.get();let l,u,d,m,p,g;E(i,s,e.basis1),E(i,i,e.basis2),E(o,s,e.basis1),L(o,o,e.basis2),L(a,s,e.basis1),L(a,a,e.basis2),L(c,s,e.basis1),E(c,c,e.basis2);for(const f of[i,o,a,c]){const e=t.fromRenderCoords(f,f,r);if(n(e))return null;l=null==l?e[0]:Math.min(l,e[0]),u=null==u?e[0]:Math.max(u,e[0]),d=null==d?e[1]:Math.min(d,e[1]),m=null==m?e[1]:Math.max(m,e[1]),p=null==p?e[2]:Math.min(p,e[2]),g=null==g?e[2]:Math.max(g,e[2])}return new Xe({xmin:l,xmax:u,ymin:d,ymax:m,zmin:p,zmax:g,spatialReference:r})}function It(e,t){return z(t,e.basis2,e.basis1)+Nt}function Et(e,t,r){return z(e.basis1,r,t)-Nt}function Rt(e,t,r,s,n,o,a=S()){return o.toRenderCoords(e,a.origin)?(o.worldBasisAtPosition(a.origin,v.X,a.basis1),o.worldBasisAtPosition(a.origin,v.Y,a.basis2),H(a.basis2,a.basis1,a.origin,a.plane),N(a,-i(t),x(a),a),N(a,i(r),a.basis1,a),T(a.basis1,a.basis1,s/2),T(a.basis2,a.basis2,n/2),G(a),a):(Ye.error(`Failed to project slice plane position, projection from ${e.spatialReference.wkid} is not supported`),null)}function jt(e,t){if(n(e)||n(e.position))return null;const r=B(e.position,t.spatialReference,t.elevationProvider);if(n(r))return null;const s=Ce.renderUnitScaleFactor(e.position.spatialReference,t.spatialReference),i=e.width*s,o=e.height*s;return{position:r,heading:e.heading,tilt:e.tilt,renderWidth:i,renderHeight:o}}function At(e,t,r,s=S()){const i=jt(e,t);return n(i)?null:Mt(i,t,r,s)}function Mt(e,t,r,s=S()){if(n(e))return null;const i=Rt(e.position,e.heading,e.tilt,e.renderWidth,e.renderHeight,t.renderCoordsHelper,s);return!r.tiltEnabled&&o(i)&&We(i,t.renderCoordsHelper,i),i}function Lt(e){switch(e.type){case"analysis":case"building-scene":case"csv":case"feature":case"geo-rss":case"geojson":case"graphics":case"group":case"integrated-mesh":case"kml":case"map-notes":case"ogc-feature":case"point-cloud":case"route":case"scene":case"stream":case"voxel":case"subtype-group":case"unknown":case"unsupported":case"wfs":case null:return!1;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"elevation":case"imagery":case"imagery-tile":case"map-image":case"open-street-map":case"tile":case"vector-tile":case"wcs":case"web-tile":case"wms":case"wmts":return!0;default:return t(e.type),!1}}!function(e){e[e.POSITIVE_X=0]="POSITIVE_X",e[e.POSITIVE_Y=1]="POSITIVE_Y",e[e.NEGATIVE_X=2]="NEGATIVE_X",e[e.NEGATIVE_Y=3]="NEGATIVE_Y"}(nt||(nt={}));const Pt=De.Custom1;var kt,Ct;!function(e){e[e.HEADING=1]="HEADING",e[e.TILT=2]="TILT"}(kt||(kt={})),function(e){e[e.HORIZONTAL_OR_VERTICAL=0]="HORIZONTAL_OR_VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.TILTED=3]="TILTED"}(Ct||(Ct={}));const _t=De.Custom2,vt=D(),Nt=Math.PI/2,Ut=De.Custom1,Vt=De.Custom2;var St;function xt(e){const t="building-scene-3d"===e.type?e:null;return o(t)}!function(e){e[e.CENTER_ON_CALLOUT=0]="CENTER_ON_CALLOUT",e[e.CENTER_ON_ARROW=1]="CENTER_ON_ARROW"}(St||(St={}));export{Pt as DidPointerMoveRecentlyFlag,_t as IsShiftEdgeOnScreenFlag,St as OffsetMode,kt as RotationAxis,Ct as SliceOrientation,Tt as addArrowTips,Ke as calculateBoundedPlaneTranslateRotate,lt as calculateDiagonalResizeHandleScale,$e as calculatePlaneHalfSize,ct as calculateResizeHandlePadding,at as calculateScreenSpaceBasisLength2,bt as createArrowGeometry,gt as createGridVisualElement,pt as createOutlineVisualElement,Ze as createPlane,ft as createResizeManipulator,mt as createRotateManipulator,Qe as createRotatePlane,dt as createShiftManipulator,Je as createShiftPlane,We as forceHorizontalOrVertical,Lt as isAlwaysDrapedLayer,ut as isDiagonalResizeHandle,xt as isIBuildingSceneLayerView3D,Be as normalToBases,wt as planeToExtent,yt as planeToShape,jt as projectAndElevationAlignShape,Mt as projectedShapeToPlane,Ut as resizeNormal,Vt as resizeOutlineOnly,qe as resizePlane,Ot as shapeToExtent,At as shapeToPlane,rt as updateResizeHandle,st as updateRotateHeadingHandle,it as updateRotateTiltHandle,et as updateShiftRestartHandle};
