/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import t from"../../support/debugFlags.js";let e,i,n=!1,l=!1,o=!1,s=!1,a=null;function c(t,e){if(!l||!i)return;u();const n=i;let o=0;for(let i=0;i<t.accBinsNumX;i++)for(let e=0;e<t.accBinsNumY;e++){const l=t.accBins[i][t.accBinsNumY-1-e];o+=l.length;const s=i*t.accBinsSizeX,a=(i+1)*t.accBinsSizeX,c=e*t.accBinsSizeY,r=(e+1)*t.accBinsSizeY;n.fillText(l.length.toFixed(),s+5,c+15),p(s,a,c,r,"blue")}n.fillText("total totalShownLabels: "+o,70,40),n.fillText("total visible labels: "+e.size,70,50),n.fillText("total numTests: "+t.accNumTests,70,30)}function r(i){o=t.DECONFLICTOR_SHOW_VISIBLE,s=t.DECONFLICTOR_SHOW_INVISIBLE,n=o||s,l=t.DECONFLICTOR_SHOW_GRID,a=null,n||l?a=()=>h(i):e&&(e.parentElement.removeChild(e),e=null)}function u(){a&&(a(),a=null)}function h(t){null==e&&(e=document.createElement("canvas"),e.setAttribute("id","canvas2d"),t.surface.parentElement.style.position="relative",t.surface.parentElement.appendChild(e));const n=t.width*t.pixelRatio,l=t.height*t.pixelRatio;e.setAttribute("width",`${n}px`),e.setAttribute("height",`${l}px`),e.setAttribute("style",`position:absolute;left:0px;top:0px;display:block;pointer-events:none;width:${t.width}px;height:${t.height}px`),i=e.getContext("2d"),i.clearRect(0,0,t.width,t.height),i.font="12px Arial"}function p(t,n,l,o,s){u();const a=e.height,c=i;c.beginPath(),c.lineWidth=1,c.strokeStyle=s,c.moveTo(t,a-l),c.lineTo(n,a-l),c.stroke(),c.lineTo(n,a-o),c.stroke(),c.lineTo(n,a-l),c.stroke(),c.lineTo(t,a-l),c.stroke(),c.lineTo(t,a-l),c.stroke(),c.closePath()}function f(t,e){n&&(e&&o||!e&&s)&&p(t.aabr[0],t.aabr[2],t.aabr[1],t.aabr[3],e?"green":"red")}export{c as drawAccelerationStruct,f as drawPoly,r as prepare};
