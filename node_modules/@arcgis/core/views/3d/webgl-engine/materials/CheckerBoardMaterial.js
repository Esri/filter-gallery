/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutputOptions.js";import{TransparencyPassType as t}from"../lib/basicInterfaces.js";import r from"../lib/GLMaterial.js";import{Material as s,DefaultMaterialParameters as i}from"../lib/Material.js";import{RenderSlot as a}from"../lib/RenderSlot.js";import{DefaultBufferWriter as n,PositionUVLayout as o}from"./internal/DefaultBufferWriter.js";import{intersectTriangleGeometry as p}from"./internal/MaterialUtil.js";import{CheckerBoardTechniqueConfiguration as u,CheckerBoardTechnique as h}from"../shaders/CheckerBoardTechnique.js";class l extends s{constructor(e){super(e,f),this.techniqueConfig=new u}dispose(){}getPassParameters(){return this.parameters}getTechniqueConfig(e,r){return this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.polygonOffset=this.parameters.polygonOffset,this.techniqueConfig.transparencyPassType=r?r.transparencyPassType:t.NONE,this.techniqueConfig.multipassTerrainEnabled=!!r&&r.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!r&&r.cullAboveGround,this.techniqueConfig}intersect(e,t,r,s,i,a,n){return p(e,t,s,i,a,void 0,n)}requiresSlot(e){let t=a.OPAQUE_MATERIAL;return this.parameters.transparent&&(t=this.parameters.writeDepth?a.TRANSPARENT_MATERIAL:a.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===t||e===a.DRAPED_MATERIAL}createGLMaterial(t){return t.output===e.Color||t.output===e.Alpha?new c(t):null}createBufferWriter(){return new n(o)}}class c extends r{updateParameters(e){return this.ensureTechnique(h,e)}beginSlot(e){return this.updateParameters(e)}bind(e,t){t.bindPass(this._material.getPassParameters(),e)}}const f={size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1,...i};export{l as CheckerBoardMaterial};
