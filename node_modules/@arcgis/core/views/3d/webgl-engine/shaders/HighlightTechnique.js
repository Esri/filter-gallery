/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as i}from"../../../../chunks/tslib.es6.js";import{ReloadableShaderModule as o}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{parameter as t,ShaderTechniqueConfiguration as e}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Default3D as s}from"../lib/DefaultVertexAttributeLocations.js";import{Program as a}from"../lib/Program.js";import{H as l,a as n}from"../../../../chunks/HighlightComposition.glsl.js";import{BlendFactor as h,PrimitiveType as m}from"../../../webgl/enums.js";import{makePipelineState as p,separateBlendingParams as c,defaultColorWriteParams as g}from"../../../webgl/renderState.js";const u=8.6,f=.4;class d extends r{initializeProgram(i){const o=d.shader.get().build(this.configuration);return new a(i.rctx,o,s)}bindApplyPass(i){this.program.setUniform4fv("uColor",i.color),this.program.setUniform4fv("haloColor",i.haloColor),this.program.setUniform1f("outlineSize",u),this.program.setUniform1f("blurSize",f),this.program.setUniform4f("opacities",i.haloOpacity,i.haloOpacityOccluded,i.fillOpacity,i.fillOpacityOccluded)}initializePipeline(){return this.configuration.highlightStage===l.Apply?p({blending:c(h.SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA),colorWrite:g}):p({colorWrite:g})}get primitiveType(){return this.configuration.gridOptimization?m.TRIANGLES:m.TRIANGLE_STRIP}}d.shader=new o(n,(()=>import("./HighlightComposition.glsl.js")));class S extends e{constructor(){super(...arguments),this.highlightStage=l.Blur,this.gridOptimization=!1}}i([t({count:l.COUNT})],S.prototype,"highlightStage",void 0),i([t()],S.prototype,"gridOptimization",void 0);export{d as HighlightCompositionTechnique,S as HighlightCompositionTechniqueConfiguration};
