/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as r}from"../../../../chunks/tslib.es6.js";import{j as o}from"../../../../chunks/mat4.js";import{c as t}from"../../../../chunks/mat4f64.js";import{ReloadableShaderModule as i}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as e}from"../core/shaderTechnique/ShaderTechnique.js";import{parameter as s,ShaderTechniqueConfiguration as a}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Program as n}from"../lib/Program.js";import{VertexAttribute as l}from"../lib/VertexAttribute.js";import{L as m}from"../../../../chunks/LaserlinePath.glsl.js";import{BlendFactor as h}from"../../../webgl/enums.js";import{makePipelineState as f,simpleBlendingParams as p,defaultColorWriteParams as g}from"../../../webgl/renderState.js";class c extends e{initializeProgram(r){const o=c.shader.get(),t=this.configuration,i=o.build(t);return new n(r.rctx,i,c.attributeLocations)}bind(r,t,i){this.program.setUniform3fv("innerColor",r.innerColor),this.program.setUniform1f("innerWidth",r.innerWidth*i.pixelRatio),this.program.setUniform3fv("glowColor",r.glowColor),this.program.setUniform1f("glowWidth",r.glowWidth*i.pixelRatio),this.program.setUniform1f("glowFalloff",r.glowFalloff),this.program.setUniform1f("globalAlpha",r.globalAlpha),this.program.setUniform1f("perScreenPixelRatio",i.perScreenPixelRatio),this.program.setUniform2f("pixelToNDC",2/i.fullWidth,2/i.fullHeight),this.program.setUniformMatrix4fv("proj",i.projectionMatrix),o(u,i.viewMatrix,t),this.program.setUniformMatrix4fv("modelView",u),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=r.globalAlphaContrastBoost?r.globalAlphaContrastBoost:1)}initializePipeline(){return f({blending:p(h.ONE,h.ONE_MINUS_SRC_ALPHA),colorWrite:g})}}c.shader=new i(m,(()=>import("./LaserlinePath.glsl.js"))),c.attributeLocations=new Map([[l.START,0],[l.END,1],[l.UP,2],[l.EXTRUDE,3]]);class d extends a{constructor(){super(...arguments),this.contrastControlEnabled=!1}}r([s()],d.prototype,"contrastControlEnabled",void 0);const u=t();export{c as LaserlinePathTechnique,d as LaserlinePathTechniqueConfiguration};
