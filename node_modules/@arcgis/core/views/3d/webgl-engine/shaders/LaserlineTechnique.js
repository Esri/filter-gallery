/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.23/esri/copyright.txt for details.
*/
import{_ as o}from"../../../../chunks/tslib.es6.js";import{deg2rad as t}from"../../../../core/mathUtils.js";import{ReloadableShaderModule as e}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{parameter as i,ShaderTechniqueConfiguration as n}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{Default3D as a}from"../lib/DefaultVertexAttributeLocations.js";import{Program as l}from"../lib/Program.js";import{d as s,L as h}from"../../../../chunks/Laserlines.glsl.js";import{BlendFactor as f}from"../../../webgl/enums.js";import{makePipelineState as m,simpleBlendingParams as p,defaultColorWriteParams as d}from"../../../webgl/renderState.js";class c extends r{initializeProgram(o){const t=c.shader.get(),e=this.configuration,r=t.build(e);return new l(o.rctx,r,a)}bind(o,e){this.program.setUniform3fv("innerColor",o.innerColor),this.program.setUniform1f("innerWidth",o.innerWidth*e.pixelRatio),this.program.setUniform3fv("glowColor",o.glowColor),this.program.setUniform1f("glowWidth",o.glowWidth*e.pixelRatio),this.program.setUniform1f("glowFalloff",o.glowFalloff),this.program.setUniform1f("globalAlpha",o.globalAlpha),this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=o.globalAlphaContrastBoost?o.globalAlphaContrastBoost:1);const r=null!=o.angleCutoff?o.angleCutoff:s;this.program.setUniform2f("angleCutoff",Math.cos(r),Math.cos(Math.max(0,r-t(2)))),this.configuration.intersectsLineEnabled&&this.program.setUniform1f("perScreenPixelRatio",e.perScreenPixelRatio)}initializePipeline(){return m({blending:p(f.ONE,f.ONE_MINUS_SRC_ALPHA),colorWrite:d})}}c.shader=new e(h,(()=>import("./Laserlines.glsl.js")));class g extends n{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1,this.contrastControlEnabled=!1}}o([i()],g.prototype,"heightManifoldEnabled",void 0),o([i()],g.prototype,"pointDistanceEnabled",void 0),o([i()],g.prototype,"lineVerticalPlaneEnabled",void 0),o([i()],g.prototype,"intersectsLineEnabled",void 0),o([i()],g.prototype,"contrastControlEnabled",void 0);export{c as LaserlineTechnique,g as LaserlineTechniqueConfiguration};
