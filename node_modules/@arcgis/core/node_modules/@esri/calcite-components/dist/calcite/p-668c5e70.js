/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 */
import{f as t,g as i}from"./p-8f3a3e4e.js";import{g as s}from"./p-accdb0ce.js";import{d as e}from"./p-b06207bb.js";import{h as n,H as o}from"./p-2e29554c.js";function a(){this.setUpItems(),this.setUpFilter(),this.deselectRemovedItems()}const c=["ArrowUp","ArrowDown"];function r(){this.setUpItems(),this.setUpFilter(),this.emitCalciteListChange=e(p.bind(this),0)}function l(){var t;null===(t=this.mutationObserver)||void 0===t||t.observe(this.el,{childList:!0,subtree:!0})}function h(){var t;null===(t=this.mutationObserver)||void 0===t||t.disconnect()}function u(i){const{selectedValues:s}=this,{item:e,value:n,selected:o,shiftPressed:a}=i.detail;o?(this.multiple&&a&&this.selectSiblings(e),this.multiple||this.deselectSiblingItems(e),s.set(n,e)):(s.delete(n),this.multiple&&a&&this.selectSiblings(e,!0)),this.multiple||(v(e,o),o&&t(e)),this.lastSelectedItem=e,this.emitCalciteListChange()}function f(t){t.stopPropagation();const i=t.detail.oldValue,s=this.selectedValues;if(s.has(i)){const e=s.get(i);s.delete(i),s.set(t.detail.newValue,e)}}function d(t){const{el:i,items:s,multiple:e,selectedValues:n}=this;e||i.contains(t.relatedTarget)||s.forEach((i=>{v(i,0===n.size?i.contains(t.target)||t.target===i:i.selected)}))}function m(i){const{key:e,target:n}=i;if(!function(t){return!!c.find((i=>i===t))}(e))return;const{items:o,multiple:a,selectionFollowsFocus:r}=this,{length:l}=o,h=o.indexOf(n);if(!l||-1===h)return;i.preventDefault();const u=o[s(h+("ArrowUp"===e?-1:1),l)];o.forEach((t=>v(t,t===u))),!a&&r&&(u.selected=!0),t(u)}function p(){this.calciteListChange.emit(this.selectedValues)}function b(t){if(t.defaultPrevented)return;const i=t.target,s=this.selectedValues;"CALCITE-PICK-LIST-GROUP"===i.parentElement.tagName?(i.parentElement.remove(),Array.from(i.parentElement.children).forEach((t=>s.delete(t.value)))):(i.remove(),s.delete(i.value)),this.emitCalciteListChange()}function v(t,i){i?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1")}async function g(i){if(this.filterEnabled&&"filter"===i)return void await t(this.filterEl);const{items:s,multiple:e,selectionFollowsFocus:n}=this;if(0===s.length)return;if(e)return s[0].setFocus();const o=s.find((t=>t.selected))||s[0];return n&&(o.selected=!0),o.setFocus()}function j(t){this.items=Array.from(this.el.querySelectorAll(t));let i=!1;const{items:s}=this;s.forEach((t=>{t.icon=this.getIconType(),this.multiple||(t.disableDeselect=!0,v(t,!1)),t.selected&&(i=!0,v(t,!0),this.selectedValues.set(t.value,t))}));const[e]=s;!i&&e&&v(e,!0)}function F(){const t=this.selectedValues,i=this.items.map((({value:t})=>t));t.forEach((t=>{i.includes(t.value)||this.selectedValues.delete(t.value)}))}function w(t){this.items.forEach((i=>{i.value!==t.value&&(i.toggleSelected(!1),this.selectedValues.has(i.value)&&this.selectedValues.delete(i.value))}))}function y(t,i=!1){if(!this.lastSelectedItem)return;const{items:s}=this,e=s.findIndex((t=>t.value===this.lastSelectedItem.value)),n=s.findIndex((i=>i.value===t.value));s.slice(Math.min(e,n),Math.max(e,n)).forEach((t=>{t.toggleSelected(!i),i?this.selectedValues.delete(t.value):this.selectedValues.set(t.value,t)}))}let A;function C(t){const{filteredItems:s}=t.currentTarget,e=s.map((t=>t.value));let n=!1;A||(A=new Set);const o=this.items.filter((t=>{const i=t.parentElement;i.matches("calcite-pick-list-group")&&A.add(i);const s=e.includes(t.value);return t.hidden=!s,n||(n=s&&t.selected),s}));A.forEach((t=>{const s=o.some((i=>t.contains(i)));if(t.hidden=!s,!s)return;const e=i(t,"parent-item");e&&(e.hidden=!1,o.includes(e)&&Array.from(t.children).forEach((t=>t.hidden=!1)))})),A.clear(),o.length>0&&!n&&!this.multiple&&v(o[0],!0)}function k(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}var x;!function(t){t.circle="circle",t.square="square",t.grip="grip"}(x||(x={}));const O=t=>{var{props:{disabled:i,loading:s,filterEnabled:e,dataForFilter:a,handleFilter:c,filterPlaceholder:r,setFilterEl:l}}=t,h=function(t,i){var s={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(s[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(e=Object.getOwnPropertySymbols(t);n<e.length;n++)i.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(t,e[n])&&(s[e[n]]=t[e[n]])}return s}(t,["props"]);const u=n("slot",null);return n(o,Object.assign({"aria-busy":s.toString(),"aria-disabled":i.toString(),role:"menu"},h),n("section",null,n("header",{class:{"sticky-pos":!0}},e?n("calcite-filter",{"aria-label":r,disabled:s||i,items:a,onCalciteFilterChange:c,placeholder:r,ref:l}):null,n("slot",{name:"menu-actions"})),s||i?n("calcite-scrim",{loading:s}):null,u))},E={actions:"actions",actionsEnd:"actions--end",actionsStart:"actions--start",description:"description",handle:"handle",handleActivated:"handle--activated",highlight:"highlight",icon:"icon",iconDot:"icon-dot",label:"label",remove:"remove",title:"title",textContainer:"text-container"},I={checked:"check",remove:"x"},S={actionsEnd:"actions-end",actionsStart:"actions-start"},L={remove:"Remove"};export{E as C,x as I,O as L,S,L as T,w as a,l as b,h as c,F as d,u as e,f,k as g,C as h,r as i,j,m as k,g as l,a as m,d as n,I as o,b as r,y as s}